{"version":3,"sources":["src/views/tickler/tickler.js","src/views/test-bed/test-bed.js","src/views/quotes/quotes.js","src/views/quotes/quote.js","src/views/quote-images/quote-images.js","src/views/quote-dashboard/quote-dashboard.js","src/views/login/login.js","src/views/home/home.js","src/views/customers/customers.js","src/views/customers/customer.js","src/views/callback/callback.js","src/views/access-denied/access-denied.js","src/services/user-service.js","src/services/session-service.js","src/services/md5-service.js","src/services/google-address-service.js","src/services/edmunds-service.js","src/services/discovery-insurance-service.js","src/services/discovery-insurance-map.js","src/services/data-service.js","src/security/rule.js","src/security/can-can-step.js","src/security/authorize-step.js","src/security/ability.js","src/resources/index.js","src/resources/elements/vehicle-info/vehicle-info.js","src/resources/elements/user-settings/user-settings.js","src/resources/elements/quote-info/quote-info.js","src/resources/elements/personal-info/personal-info.js","src/resources/elements/notifier/notifier.js","src/resources/elements/notifier/notification.js","src/resources/elements/gravatar/gravatar.js","src/resources/elements/driver-info/driver-info.js","src/resources/elements/data-pager/data-pager.js","src/resources/elements/contact-info/contact-info.js","src/resources/elements/address-info/address-info.js","src/resources/behaviors/dirty-binding-behavior.js","src/resources/attributes/set-focus/set-focus.js","src/resources/attributes/input-mask/input-mask.js","src/main.js","src/environment.js","src/dialogs/vin-dialog.js","src/dialogs/vehicle-lookup-dialog.js","src/dialogs/vehicle-dialog.js","src/dialogs/user-settings-dialog.js","src/dialogs/submit-dialog.js","src/dialogs/note-dialog.js","src/dialogs/member-lookup-dialog.js","src/dialogs/member-dialog.js","src/dialogs/lookup-dialog.js","src/dialogs/customer-dialog.js","src/dialogs/confirm-delete.js","src/dialogs/confirm-delete-dialog.js","src/dialogs/address-dialog.js","src/app.js"],"names":["Tickler","router","dialogService","messageBus","dataService","database","fallbackSrc","items","origItems","subscribe","startIndex","payload","currentPage","pageSize","amount","filter","item","index","activate","params","userId","userid","getResources","Promise","all","findAll","name","then","values","catch","console","error","launchDeleteDlg","model","header","prompt","open","viewModel","ConfirmDeleteDialog","lock","whenClosed","response","wasCancelled","log","newRecord","recordid","navigate","loadRecord","$index","_id","$oid","inject","Router","DialogService","EventAggregator","DataService","TestBed","firebase","sessionSvc","currentItem","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","apps","length","initializeApp","attached","dbRef","ref","child","on","conversation","snap","val","submit","event","stopPropagation","msg","user","username","message","set","text","Firebase","SessionService","Quotes","dialogSvc","dataSvc","notifier","collection","quoteStatus","fa","cls","row","options","result","closeResult","deleteOne","splice","growl","computeDateTime","date","today","format","time","computeQuoteStatus","status","Notifier","Quote","signaler","origItem","hasChanged","debug","isEqual","oldValue","newValue","JSON","stringify","heading","findById","deactivate","save","parse","saveInterval","setInterval","customerId","detached","clearInterval","lookups","lookupDialog","launchMemberLookupDlg","close","recordId","MemberLookupDialog","addHouseholdMember","output","launchMemberDlg","record","data","isReadonly","MemberDialog","household_members","launchVehicleLookupDlg","VehicleLookupDialog","addHouseholdVehicle","launchVehicleDlg","VehicleDialog","household_vehicles","launchNoteDlg","isNew","newNote","NoteDialog","addNote","disabled","value","args","includes","push","signal","removeHouseholdVehicle","removeHouseholdMember","d","Date","now","note","created_date","created_by","modified_date","modified_by","is_active","notes","saveCallback","ignoreNav","quote_status","quote_type","type","showClose","timeout","view","navigateToRoute","manageImages","BindingSignaler","QuoteImages","QuoteDashboard","$or","QuoteStatus","$eq","loadLog","quote","forceQuit","Login","password","login","cancel","Home","Customers","Customer","newCustomer","first_name","middle_name","last_name","birth_date","gender","social_security_number","marital_status","address","street","city","state","postal_code","county","home_owner","contact","email","home_number","mobile_number","preferred_contact_method","driver","license_status","license_number","license_state","license_date","license_years_experience","relationship_to_customer","driver_type","military_student_type","military_paygrade","images","getLookup","lookup","find","l","getLookupItems","fields","launchAddressDlg","AddressDialog","newHouseholdMember","newHouseholdVehicle","selectChange","e","key","title","roles","lookupName","currentLookup","LookupDialog","setValue","src","srcField","targetField","source","sField","vin","year","make","description","custom_equipment_type","additional_electronic_type","vehicle_use_code","vehicle_symbol_code","airbag_type","licenseDateChange","calculateAge","birthYear","getFullYear","birthMonth","getMonth","birthDay","getDate","todayDate","todayYear","todayMonth","todayDay","age","Callback","handleAuthentication","AccessDenied","imgUrl","UserService","isAuthenticated","isAdmin","authenticate","query","findOne","authorize","profile","setAvatar","avatar","auth0","WebAuth","domain","clientID","redirectUri","audience","responseType","scope","localStorage","getItem","parseHash","err","authResult","accessToken","idToken","setSession","publish","authenticated","expiresAt","expiresIn","getTime","idTokenPayload","nickname","setItem","logout","removeItem","origin","window","location","href","isTokenValid","Md5Service","md5","string","RotateLeft","lValue","iShiftBits","AddUnsigned","lX","lY","lX4","lY4","lX8","lY8","lResult","F","x","y","z","G","H","I","FF","a","b","c","s","ac","GG","HH","II","ConvertToWordArray","lWordCount","lMessageLength","lNumberOfWords_temp1","lNumberOfWords_temp2","lNumberOfWords","lWordArray","Array","lBytePosition","lByteCount","charCodeAt","WordToHex","WordToHexValue","WordToHexValue_temp","lByte","lCount","toString","substr","Utf8Encode","replace","utftext","n","String","fromCharCode","k","AA","BB","CC","DD","S11","S12","S13","S14","S21","S22","S23","S24","S31","S32","S33","S34","S41","S42","S43","S44","temp","toLowerCase","GoogleAddressService","isLoaded","unload","autocomplete","loadJS","url","callback","target","scriptTag","document","createElement","id","onload","appendChild","init","inputSelector","el","querySelector","inputElement","loadCallback","bind","body","google","maps","places","Autocomplete","types","addListener","fillInAddress","place","getPlace","addr","address_components","street_number","route","locality","administrative_area_level_2","administrative_area_level_1","short_name","geolocate","navigator","geolocation","getCurrentPosition","position","lat","coords","latitude","lng","longitude","circle","Circle","center","radius","accuracy","setBounds","getBounds","EdmundsService","http","HttpClient","baseUrl","fmt","configureFetch","configure","config","withBaseUrl","withDefaults","headers","withInterceptor","request","method","performLookup","fetch","json","DiscoveryInsuranceService","counter","initReq","configureHttp","onScriptLoaded","require","paths","waitSeconds","X2JS","req","credentials","CustLoginId","CustPswd","RqUID","TransactionRequestDt","TransactionEffectiveDt","withHeader","requestError","responseError","beginRequest","beginHttpRequest","xml","buildAcord2","SignonRq","InsuranceSvcRq","post","x2js","xml_str2json","buildSignonRq","SignonPswd","CustId","Pswd","ClientDt","Producer","ProducerInfo","ContractNumber","trim","buildInsuranceSvcRq","buildPersAutoPolicyQuoteIndRq","PersAutoPolicyQuoteIndRq","CurCd","buildInsuredOrPrincipal","InsuredOrPrincipal","buildPersPolicy","PersPolicy","buildPersAutoLineBusiness","PersAutoLineBusiness","buildLocation","Location","buildGeneralPartyInfo","GeneralPartyInfo","buildInsuredOrPrincipalInfo","InsuredOrPrincipalInfo","buildNameInfo","NameInfo","buildAddr","Addr","buildCommunications","Communications","PersonName","Surname","GivenName","AddrTypeCd","Addr1","City","StateProvCd","PostalCode","County","buildPhoneInfo","PhoneInfo","buildEmailInfo","EmailInfo","forEach","pi","PhoneTypeCd","CommunicationUseCd","PhoneNumber","InsuredOrPrincipalRoleCd","buildPersonInfo","PersonInfo","buildPrincipalInfo","PrincipalInfo","GenderCd","BirthDt","MaritalStatusCd","QuestionAnswer","QuestionCd","YesNoCd","LOBCd","buildContractTerm","ContractTerm","buildQuoteInfo","QuoteInfo","buildPersApplicationInfo","PersApplicationInfo","buildDriverVeh","DriverVeh","EffectiveDt","ExpirationDt","buildDurationPeriod","DurationPeriod","NumUnits","UnitMeasurementCd","CompanysQuoteNumber","ResidenceOwnedRentedCd","dv","buildPersDriver","PersDriver","buildPersVeh","PersVeh","pd","DriverInfo","buildLicense","License","buildPersDriverInfo","PersDriverInfo","LicenseTypeCd","LicenseStatusCd","LicenseDt","YearsExperience","LicensePermitNumber","DriverRelationshipToApplicantCd","DriverPoints","DriverTypeCd","GoodStudentCd","pv","Manufacturer","Model","ModelYear","VehBodyTypeCd","LeasedVehInd","VehIdentificationNumber","VehSymbolCd","NonOwnedVehInd","VehUseCd","AirBagTypeCd","buildCoverage","Coverage","CoverageCd","CoverageDesc","buildDeductible","buildLimit","Limit","Deductible","FormatInteger","LimitAppliesToCd","signonRq","insuranceSvcRq","buildAcord","DiscoveryInsuranceMap","mapDataToAcord","dt","toISOString","mos","Number","TermLength","month","day","exp","TransactionExpirationDt","substring","indexOf","drivers","InsuredLastName1","InsuredFirstName1","PhoneNumber1","HomeOwnerType","getDriverVeh","getPersDriver","getPersVeh","getLocation","LastName","FirstName","PhoneNumber2","LicenseStatus","bi","BIType","split","biPerPers","biPerAcc","pdType","PDType","medType","MedType","unbi","UnBIType","unbiPerPers","unbiPerAcc","unpdType","UnPDType","vehicles","coll","Coll","comp","Comp","VehDescription","VehSymCd","AirBagType","RentalType","modal","metaSrc","metaKey","dataSrc","dataKey","queryByExample","keys","Object","answer","i","len","orderBy","sort","insert","update","upd","deleteAll","Rule","base_behavior","action","subject","conditions","initialize","actions","_","flatten","subjects","is_relevant","matches_action","matches_subject","matches_conditions","isObject","isEmpty","subject_class","matches_conditions_hash","hasOwnProperty","expanded_actions","matches_subject_class","some","sub","__name","attribute","isUndefined","get","isArray","element","CanCanStep","aurelia","userService","ability","Ability","run","navigationInstruction","next","can","canAccess","getAllInstructions","every","moduleId","Redirect","Aurelia","AuthorizeStep","instructions","settings","fragment","defaults","rules","aliased_actions","read","create","map","rule","match","relevant_rules","cannot","set_can","set_cannot","alias_action","from","validate_target","concat","chain","include","Error","clear_aliased_actions","expand_actions","reversed_rules","slice","reverse","globalResources","VehicleInfo","bindable","UserSettings","showUserSettings","UserSettingsDialog","PersonalInfo","defaultBindingMode","bindingMode","twoWay","launchCustomerDlg","CustomerDialog","setTimeout","currentZIndex","getNextZIndex","notifications","add","notification","controller","isModal","remove","style","zIndex","Notification","footer","theme","standardTimeout","info","Gravatar","md5Svc","refreshBindings","propertyChanged","generate","hashedCredential","isEmail","credential","isSecure","size","rating","defaultImage","encodeURIComponent","input","DataPager","initPage","pages","Math","ceil","parseInt","setCurrentPage","previousPage","nextPage","ContactInfo","AddressInfo","DirtyBindingBehavior","binding","period","updateTarget","interceptedupdateTarget","isDirtyCheck","propname","sourceExpression","expression","callevent","dirtyTimer","call","sourceContext","unbind","previous","current","SetFocus","focus","DOM","Element","InputMask","HTMLInputElement","addEventListener","keyDownHandler","removeEventListener","getOptions","isInt","isInteger","valueLen","patternLen","pattern","char","isValidNonInputKey","selectionEnd","selectionStart","processKey","preventDefault","nextChar","use","standardConfiguration","developmentLogging","feature","plugin","useDefaults","centerHorizontalOnly","startingZIndex","keyboard","start","setRoot","testing","VinDialog","owner","edmundsSvc","setVinData","ok","years","styles","DialogController","selectRecord","r","isSelected","SubmitDialog","carriers","autoRun","canSubmit","toggleSelect","selectedItems","addRecord","removeRecord","ConfirmDelete","googleAddressSvc","App","configureRouter","handleUnknownRoutes","instruction","pushState","root","addPipelineStep","nav","mapUnknownRoutes"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {Router} from 'aurelia-router';\nimport {DialogService} from 'aurelia-dialog';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {DataService} from '../../services/data-service';\nimport {ConfirmDeleteDialog} from '../../dialogs/confirm-delete-dialog';\n\nexport class Tickler {\n  static inject = [Router, DialogService, EventAggregator, DataService];\n\n  database = 'quote-one';\n  // fallbackSrc = '/quoteone/src/assets/avatar-default.jpg';\n  fallbackSrc = 'static/avatar-default.jpg';  \n  items = [];  \n  origItems = [];\n\n  constructor(router, dialogService, messageBus, dataService) {\n    this.router = router;\n    this.dialogService = dialogService;\n    this.messageBus = messageBus;\n    this.dataService = dataService;\n\n    this.messageBus.subscribe('data-pager:page', payload => {\n      // console.log('data-pager:page', payload);\n      let startIndex = payload.currentPage * payload.pageSize;\n      let amount = payload.pageSize;\n      this.items = this.origItems.filter((item, index) => {\n        return index >= startIndex && index < startIndex + amount;\n      });\n    });        \n  }\n  \n  activate(params) {\n    if (params && params.database && params.userId) {\n      this.database = params.database;\n      this.userid = params.userId;\n    }\n    return this.getResources();\n  }\n\n  getResources() {\n    return Promise.all([\n      this.dataService.findAll(this.database, \"quotes\", null, {name: 1})\n    ]).then(values => {\n      this.origItems = values[0];\n    }).catch(error => {\n      console.error(error);\n    });\n  }\n\n  launchDeleteDlg() {\n    let model = {\n      header: \"Confirm Delete\",\n      prompt: `Are you sure you want to delete this record?`\n    };\n    this.dialogService.open({\n      viewModel: ConfirmDeleteDialog, model: model, lock: false\n    }).whenClosed(response => {\n      if (!response.wasCancelled) {\n        console.log('perform delete');\n      } else {\n        console.log('delete cancelled');\n      }\n    });       \n  }\n\n  newRecord() {\n    let recordid = 'new';\n    this.router.navigate(`quote/${recordid}`); \n  }  \n\n  loadRecord($index, item) {    \n    let recordid = item._id.$oid;    \n    this.router.navigate(`quote/${recordid}`);    \n  }    \n\n}\n\n","import Firebase from 'firebase';\nimport {SessionService} from '../../services/session-service';\n\nexport class TestBed {\n  static inject = [Firebase, SessionService];\n\n  currentItem = {};\n  firebaseConfig = {\n    apiKey: \"AIzaSyDEkTD8tTzr44BV7SU5TLisxLYpnHoikR0\",\n    authDomain: \"quote-one.firebaseapp.com\",\n    databaseURL: \"https://quote-one.firebaseio.com\",\n    projectId: \"quote-one\",\n    storageBucket: \"quote-one.appspot.com\",\n    messagingSenderId: \"99622332915\"\n  };\n\n  constructor(firebase, sessionSvc) {\n    this.firebase = firebase;\n    this.sessionSvc = sessionSvc;\n    if (!firebase.apps.length) {\n      firebase.initializeApp(this.firebaseConfig);\n    }\n  }\n  attached() {\n    const dbRef = this.firebase.database().ref().child('text');\n    dbRef.on('value', snap => {\n      if (this.currentItem.conversation) {\n        this.currentItem.conversation = `${this.currentItem.conversation}${snap.val()}\\n`;      \n      } else {\n        this.currentItem.conversation = `${snap.val()}\\n`;      \n      }\n    });\n  }\n  submit(event) {\n    event.stopPropagation();\n    const msg = `(${this.sessionSvc.user.username}) ${this.currentItem.message}`;\n    // firebase.database().ref('users/' + userId).set({\n    this.firebase.database().ref().set({\n      text: msg\n    });\n    this.currentItem.message = '';    \n  }\n\n}\n    ","import {Router} from 'aurelia-router';\nimport {DialogService} from 'aurelia-dialog';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {DataService} from '../../services/data-service';\nimport {Notifier} from '../../resources/elements/notifier/notifier';\nimport {ConfirmDeleteDialog} from '../../dialogs/confirm-delete-dialog';\nimport moment from 'moment';\n\nexport class Quotes {\n  static inject = [Router, DialogService, EventAggregator, DataService, Notifier];\n\n  database = 'quote-one';\n  collection = 'quotes';\n  // fallbackSrc = '/quoteone/src/assets/avatar-default.jpg';\n  fallbackSrc = 'static/avatar-default.jpg';  \n  items = [];  \n  origItems = [];\n  quoteStatus = {\n    'kill quote': {fa:'window-close', cls: 'quote-kill-quote'},\n    'work quote': {fa: 'briefcase', cls: 'quote-work-quote'},\n    'agent completed': {fa: 'check', cls: 'quote-agent-completed'},\n    'auto completed': {fa: 'check', cls: 'quote-auto-completed'},\n    'auto failed': {fa: 'exclamation', cls: 'quote-auto-failed'},\n    'new': {fa: 'circle', cls: 'quote-new'},\n    'ready to quote': {fa: 'circle', cls: 'quote-ready-to-quote'},\n    'pending': {fa: 'circle', cls: 'quote-pending'},\n    'stalled': {fa: 'circle', cls: 'quote-stalled'}\n  };\n\n  constructor(router, dialogSvc, messageBus, dataSvc, notifier) {\n    this.router = router;\n    this.dialogSvc = dialogSvc;\n    this.messageBus = messageBus;\n    this.dataSvc = dataSvc;\n    this.notifier = notifier;\n\n    this.messageBus.subscribe('data-pager:page', payload => {\n      // console.log('data-pager:page', payload);\n      let startIndex = payload.currentPage * payload.pageSize;\n      let amount = payload.pageSize;\n      this.items = this.origItems.filter((item, index) => {\n        return index >= startIndex && index < startIndex + amount;\n      });\n    });        \n  }\n  \n  activate(params) {\n    if (params && params.database && params.userId) {\n      this.database = params.database;\n      this.userid = params.userId;\n    }\n    return this.getResources();\n  }\n\n  getResources() {\n    return Promise.all([\n      this.dataSvc.findAll(this.database, this.collection, null, {name: 1})\n    ]).then(values => {\n      this.items = values[0];\n      // this.origItems = values[0];\n    }).catch(error => {\n      console.error(error);\n    });\n  }\n\n  async launchDeleteDlg($index, row) {\n    let model = {\n      header: \"Confirm Delete\",\n      prompt: `Are you sure you want to delete this record?`\n    };\n    const options = {viewModel: ConfirmDeleteDialog, model}\n    const closeResult = await this.dialogSvc.open(options).then(result => result.closeResult);\n    if (closeResult.wasCancelled) return;\n    await this.dataSvc.deleteOne(this.database, this.collection, row._id.$oid);    \n    this.items.splice($index, 1);\n    this.notifier.growl({message: \"Delete complete!\"});\n  }\n\n  newRecord() {\n    let recordid = 'new';\n    this.router.navigate(`quote/${recordid}`); \n  }  \n\n  loadRecord($index, item) {    \n    let recordid = item._id.$oid;    \n    this.router.navigate(`quote/${recordid}`);    \n    // this.router.navigateToRoute(\"individual-quote\", {database: database, userid: this.userService.userid, recordid: recordid, view: \"individual-quote\"}, { replace: true });    \n    // this.router.navigateToRoute(\"live-route\", {database: database, userid: this.userid, projectid: \"_\", screenid: screen, recordid: recordid}, { replace: true });  \n  }\n  computeDateTime(date) {\n    let today = moment(date).format(\"MM-DD-YYYY\");\n    let time = moment(date).format(\"HH:mm\");    \n    const format = `${today} ${time}`;\n    return format;\n  }\n  computeQuoteStatus(status) {\n    let result = this.quoteStatus[status];\n    if (!result) return {fa: 'circle', cls: ''};\n    return result;\n  }\n\n}\n\n","import {computedFrom} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport {BindingSignaler} from 'aurelia-templating-resources';\nimport {DialogService} from 'aurelia-dialog';\nimport {SessionService} from '../../services/session-service';\nimport {DataService} from '../../services/data-service';\nimport {Notifier} from '../../resources/elements/notifier/notifier';\nimport {AddressDialog} from '../../dialogs/address-dialog';\nimport {ConfirmDeleteDialog} from '../../dialogs/confirm-delete-dialog';\nimport {SubmitDialog} from '../../dialogs/submit-dialog';\nimport {LookupDialog} from '../../dialogs/lookup-dialog';\nimport {MemberDialog} from '../../dialogs/member-dialog';\nimport {MemberLookupDialog} from '../../dialogs/member-lookup-dialog';\nimport {VehicleDialog} from '../../dialogs/vehicle-dialog';\nimport {VehicleLookupDialog} from '../../dialogs/vehicle-lookup-dialog';\nimport {NoteDialog} from '../../dialogs/note-dialog';\nimport moment from 'moment';\n\nexport class Quote {\n  static inject = [Router, BindingSignaler, DialogService, SessionService, DataService, Notifier];\n\n  user;\n  database = 'quote-one';\n  collection = 'quotes';\n  currentItem = null;\n  origItem = null;\n  saveInterval;\n  lookups;\n  hasChanged = false;\n\n  constructor(router, signaler, dialogSvc, sessionSvc, dataSvc, notifier) {\n    this.router = router;\n    this.signaler = signaler;\n    this.dialogSvc = dialogSvc;\n    this.sessionSvc = sessionSvc;\n    this.dataSvc = dataSvc;\n    this.notifier = notifier;\n\n    console.debug('individual-quote:ctor - sessionSvc.user', sessionSvc);\n    console.debug('individual-quote:ctor - dataSvc');\n    this.user = sessionSvc.user;\n  }\n\n  // @computedFrom(\n  //   'currentItem.first_name',\n  //   'currentItem.middle_name',\n  //   'currentItem.last_name',\n  //   'currentItem.birth_date',\n  //   'currentItem.gender',\n  //   'currentItem.social_security_number',\n  //   'currentItem.marital_status',\n  //   'currentItem.address.street',\n  //   'currentItem.address.city',\n  //   'currentItem.address.state',\n  //   'currentItem.address.postal_code',\n  //   'currentItem.address.county',\n  //   'currentItem.address.home_owner',\n  //   'currentItem.contact.email',\n  //   'currentItem.contact.home_number',\n  //   'currentItem.contact.mobile_number',\n  //   'currentItem.contact.preferred_contact_method',\n  //   'currentItem.driver.license_status',\n  //   'currentItem.driver.license_number',\n  //   'currentItem.driver.license_state',\n  //   'currentItem.driver.license_date',\n  //   'currentItem.driver.license_years_experience',\n  //   'currentItem.driver.relationship_to_customer',\n  //   'currentItem.driver.driver_type',\n  //   'currentItem.driver.military_student_type',\n  //   'currentItem.driver.military_paygrade',\n  //   'currentItem.household_members',\n  //   'currentItem.household_vehicles',\n  //   'currentItem.notes'\n  // )\n  // get hasChanged() {\n  //   const result = this.isEqual(this.origItem, this.currentItem);\n  //   return !result;\n  //   // return !this.isEqual(this.origItem, this.currentItem);\n  // }\n  isEqual(oldValue, newValue) {\n    return JSON.stringify(oldValue) === JSON.stringify(newValue);\n  }\n  async activate(params) {\n    if (params.recordid) {\n      this.recordid = params.recordid;\n    }\n    this.heading = 'QuoteOne';\n    await this.getResources();\n    if (this.recordid === 'new') {\n      return;\n    }\n    const response = await this.dataSvc.findById(this.database, this.collection, this.recordid);\n    this.currentItem = response;\n  }\n  async deactivate() {\n    this.hasChanged = !this.isEqual(this.origItem, this.currentItem);\n    if (this.hasChanged) {\n      await this.save(true);\n    }\n  }\n  attached() {\n    this.origItem = JSON.parse(JSON.stringify(this.currentItem));\n    \n    this.saveInterval = setInterval(async () => {\n      this.hasChanged = !this.isEqual(this.origItem, this.currentItem);\n      if (this.hasChanged && this.currentItem.customerId) {\n        this.notifier.growl({message: \"Auto-saving...\"});\n        await this.save(true);\n      }\n    }, 15000);\n  }\n  detached() {\n    clearInterval(this.saveInterval);\n  }\n  async getResources() {\n    const values = await Promise.all([this.dataSvc.findAll(this.database, \"lookups\")]);\n    this.lookups = values[0];\n    console.debug('individualquote:getResources - lookupDialog', this.lookupDialog);    \n  }\n  async launchMemberLookupDlg() {\n    let model = {\n      header: \"Member Lookup\",\n      close: \"Close\", \n      recordId: this.currentItem.customerId,\n      lookups: this.lookups\n    };\n    const options = {viewModel: MemberLookupDialog, model}\n    const closeResult = await this.dialogSvc.open(options).then(result => result.closeResult);\n    if (closeResult.wasCancelled) return;\n    this.addHouseholdMember(closeResult.output);\n    this.notifier.growl({message: \"Auto-saving...\"});\n    await this.save(true);\n  }\n  async launchMemberDlg(index, record) {\n    let model = {\n      header: \"Member\",\n      close: \"Close\",\n      data: record,\n      isReadonly: true,\n      lookups: this.lookups\n    };\n    const options = {viewModel: MemberDialog, model}\n    const closeResult = await this.dialogSvc.open(options).then(result => result.closeResult);\n    if (closeResult.wasCancelled) return;\n    record = closeResult.output;\n    this.currentItem.household_members[index] = record;\n    this.notifier.growl({message: \"Auto-saving...\"});\n    await this.save(true);\n  }\n  async launchVehicleLookupDlg() {\n    let model = {\n      header: \"Vehicle Lookup\",\n      close: \"Close\", \n      recordId: this.currentItem.customerId,\n      lookups: this.lookups\n    };\n    const options = {viewModel: VehicleLookupDialog, model}\n    const closeResult = await this.dialogSvc.open(options).then(result => result.closeResult);\n    if (closeResult.wasCancelled) return;\n    this.addHouseholdVehicle(closeResult.output);\n    this.notifier.growl({message: \"Auto-saving...\"});\n    await this.save(true);\n  }  \n  async launchVehicleDlg(index, record) {\n    let model = {\n      header: \"Vehicle\",\n      close: \"Close\", \n      data: record,\n      isReadonly: true,\n      lookups: this.lookups\n    };\n    const options = {viewModel: VehicleDialog, model}\n    const closeResult = await this.dialogSvc.open(options).then(result => result.closeResult);\n    if (closeResult.wasCancelled) return;\n    record = closeResult.output;\n    this.currentItem.household_vehicles[index] = record;\n    this.notifier.growl({message: \"Auto-saving...\"});\n    await this.save(true);\n  }\n  async launchNoteDlg(index, record) {\n    let isNew = false;\n    if (!record) {\n      record = this.newNote();\n      isNew = true;\n    }\n    let model = {\n      header: \"Customer Note\",\n      close: \"Close\", \n      data: record,\n      lookups: this.lookups,\n      isNew\n    };\n    const options = {viewModel: NoteDialog, model}\n    const closeResult = await this.dialogSvc.open(options).then(result => result.closeResult);\n    if (closeResult.wasCancelled) return;\n    record = closeResult.output;\n    if (isNew) {\n      this.addNote(record);\n      this.notifier.growl({message: \"Auto-saving...\"});\n      await this.save(true);\n    }\n  }\n  disabled(value, ...args) {\n    return !args.includes(value);\n  }\n  addHouseholdVehicle(record) {\n    this.currentItem.household_vehicles.push(record);\n    this.signaler.signal('update-vehicles');    \n  }\n  removeHouseholdVehicle(record, index) {\n    this.currentItem.household_vehicles.splice(index, 1);    \n    this.signaler.signal('update-vehicles');    \n  }\n  addHouseholdMember(record) {\n    this.currentItem.household_members.push(record);\n    this.signaler.signal('update-members');\n  }\n  removeHouseholdMember(record, index) {\n    this.currentItem.household_members.splice(index, 1);    \n  }\n  newNote() {\n    const d = Date.now();\n    let record = {\n      note: '',\n      created_date: d,\n      created_by: this.user.username,\n      modified_date: d,\n      modified_by: this.user.username,\n      is_active: true\n    };\n    return record;    \n  }\n  addNote(record) {\n    this.currentItem.notes.push(record);\n    this.signaler.signal('update-notes');        \n  }\n  saveCallback() {\n    this.save(true);\n  }\n  async save(ignoreNav) {\n    // if (this.userService.user.ability.cannot('execute', 'quote:save')) {    \n    //   this.notifier.growl({message:'You are not authorized to Save!', type: 'error'});    \n    //   return;   \n    // }\n    const isNew = !this.currentItem._id;\n    const d = Date.now();    \n    if (!this.currentItem._id) {\n      this.currentItem.created_date = d;\n      this.currentItem.created_by = this.sessionSvc.user.username;\n    }\n    this.currentItem.modified_date = d;\n    this.currentItem.modified_by = this.sessionSvc.user.username;\n    this.currentItem.is_active = true;\n    if (!this.currentItem.quote_status) {\n      this.currentItem.quote_status = 'new';\n    }\n    if (!this.currentItem.quote_type) {\n      this.currentItem.quote_type = 'auto';\n    }\n    const response = await this.dataSvc.save(this.database, this.collection, this.currentItem);\n    // console.log('quote:saveQuote - response', response);      \n    if (response.message) {\n      if (response.message.includes(\"Unique index constraint violated\")) {\n        this.notifier.growl({\n          type: \"error\", message: \"this name has already been taken. The name must be unique!\", showClose: true, timeout: 10000\n        });\n      } else {\n        this.notifier.growl({\n          type: \"error\", message: response.message, showClose: true, timeout: 10000\n        });\n      }\n    } else {\n      if (isNew) {\n        this.currentItem._id = response._id;\n      }\n      const view = \"quotes\";\n      this.notifier.growl({message: \"Save complete!\"});\n      this.origItem = JSON.parse(JSON.stringify(this.currentItem));\n      this.signaler.signal('update-binding');      \n      if (!ignoreNav) {\n        this.router.navigateToRoute(view);\n      }\n    }\n  }\n  manageImages() {\n    this.router.navigate(`quote/${this.recordid}/images`);     \n  }\n  computeDateTime(date) {\n    let today = moment(date).format(\"MM-DD-YYYY\");\n    let time = moment(date).format(\"HH:mm\");    \n    const format = `${today} ${time}`;\n    return format;\n  }\n  \n}\n","export class QuoteImages {\n  \n}","import {EventAggregator} from 'aurelia-event-aggregator';\nimport {DataService} from '../../services/data-service';\n\nexport class QuoteDashboard {\n  static inject = [EventAggregator, DataService];\n\n  database = 'quote-one';\n  // fallbackSrc = '/quoteone/src/assets/avatar-default.jpg';\n  fallbackSrc = 'static/avatar-default.jpg';  \n  items = [];  \n  origItems = [];\n\n  constructor(messageBus, dataService) {\n    this.messageBus = messageBus;\n    this.dataService = dataService;\n\n    this.messageBus.subscribe('data-pager:page', payload => {\n      // console.log('data-pager:page', payload);\n      let startIndex = payload.currentPage * payload.pageSize;\n      let amount = payload.pageSize;\n      this.items = this.origItems.filter((item, index) => {\n        return index >= startIndex && index < startIndex + amount;\n      });\n    });        \n  }\n\n  activate(params) {\n    if (params && params.database && params.userId) {\n      this.database = params.database;\n      this.userid = params.userId;\n    }\n    return this.getResources();\n  }\n\n  getResources() {\n    return Promise.all([\n      this.dataService.findAll(this.database, \"quotes\", { $or: [ { QuoteStatus: { $eq: \"ready to quote\" } }, { QuoteStatus: { $eq: \"pending\" } }, { QuoteStatus: { $eq: \"stalled\" } }, { QuoteStatus: { $eq: \"kill quote\" } }, { QuoteStatus: { $eq: \"auto completed\" } }, { QuoteStatus: { $eq: \"auto failed\" } },  ] }, {name: 1})\n    ]).then(values => {\n      this.origItems = values[0];\n    }).catch(error => {\n      console.error(error);\n    });\n  }\n\n  loadLog($index, quote) {    \n    // This will call mLab to pull JSON document from database...\n  }\n  forceQuit($index, quote) {\n    // This will use Firebase to send a signal down to the Desktop app....\n  }    \n  \n}\n","\nexport class Login {\n  username = 'matt';\n  password = '1234';\n\n  login() {\n  }\n  cancel() {\n\n  }\n}\n","import {Router} from 'aurelia-router';\nimport {DialogService} from 'aurelia-dialog';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {DataService} from '../../services/data-service';\nimport {Notifier} from '../../resources/elements/notifier/notifier';\nimport {ConfirmDeleteDialog} from '../../dialogs/confirm-delete-dialog';\n\nexport class Home {\n  static inject = [Router, DialogService, EventAggregator, DataService, Notifier];\n\n  database = 'quote-one';\n  collection = 'quotes';\n  // fallbackSrc = '/quoteone/src/assets/avatar-default.jpg';\n  fallbackSrc = 'static/avatar-default.jpg';\n  items = [];  \n  origItems = [];\n\n  constructor(router, dialogSvc, messageBus, dataSvc, notifier) {\n    this.router = router;\n    this.dialogSvc = dialogSvc;\n    this.messageBus = messageBus;\n    this.dataSvc = dataSvc;\n    this.notifier = notifier;\n\n    this.messageBus.subscribe('data-pager:page', payload => {\n      // console.log('data-pager:page', payload);\n      let startIndex = payload.currentPage * payload.pageSize;\n      let amount = payload.pageSize;\n      this.items = this.origItems.filter((item, index) => {\n        return index >= startIndex && index < startIndex + amount;\n      });\n    });        \n  }\n  \n  activate(params) {\n    if (params && params.database && params.userId) {\n      this.database = params.database;\n      this.userid = params.userId;\n    }\n    return this.getResources();\n  }\n\n  getResources() {\n    return Promise.all([\n      this.dataSvc.findAll(this.database, \"quotes\", null, {name: 1})\n    ]).then(values => {\n      this.items = values[0];\n      // this.origItems = values[0];\n    }).catch(error => {\n      console.error(error);\n    });\n  }\n\n  async launchDeleteDlg($index, row) {\n    let model = {\n      header: \"Confirm Delete\",\n      prompt: `Are you sure you want to delete this record?`\n    };\n    const options = {viewModel: ConfirmDeleteDialog, model}\n    const closeResult = await this.dialogSvc.open(options).then(result => result.closeResult);\n    if (closeResult.wasCancelled) return;\n    await this.dataSvc.deleteOne(this.database, this.collection, row._id.$oid);    \n    this.items.splice($index, 1);\n    this.notifier.growl({message: \"Delete complete!\"});\n  }\n\n  newRecord() {\n    let recordid = 'new';\n    // this.router.navigate(`quote/${recordid}`); \n    this.router.navigate(`individual-quote/${recordid}`); \n  }  \n\n  loadRecord($index, item) {    \n    let recordid = item._id.$oid;    \n    this.router.navigate(`quote/${recordid}`);    \n    // this.router.navigateToRoute(\"individual-quote\", {database: database, userid: this.userService.userid, recordid: recordid, view: \"individual-quote\"}, { replace: true });    \n    // this.router.navigateToRoute(\"live-route\", {database: database, userid: this.userid, projectid: \"_\", screenid: screen, recordid: recordid}, { replace: true });  \n  }    \n\n}\n\n","import {Router} from 'aurelia-router';\nimport {DialogService} from 'aurelia-dialog';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {DataService} from '../../services/data-service';\nimport {Notifier} from '../../resources/elements/notifier/notifier';\nimport {ConfirmDeleteDialog} from '../../dialogs/confirm-delete-dialog';\n\nexport class Customers {\n  static inject = [Router, DialogService, EventAggregator, DataService, Notifier];\n\n  database = 'quote-one';\n  // fallbackSrc = 'src/assets/avatar-default.jpg';\n  fallbackSrc = 'static/avatar-default.jpg';\n  items = [];  \n  origItems = [];\n  \n\n  constructor(router, dialogService, messageBus, dataService, notifier) {\n    this.router = router;\n    this.dialogService = dialogService;\n    this.messageBus = messageBus;\n    this.dataService = dataService;\n    this.notifier = notifier;\n\n    this.messageBus.subscribe('data-pager:page', payload => {\n      // console.log('data-pager:page', payload);\n      let startIndex = payload.currentPage * payload.pageSize;\n      let amount = payload.pageSize;\n      this.items = this.origItems.filter((item, index) => {\n        return index >= startIndex && index < startIndex + amount;\n      });\n    });            \n  }\n  \n  activate(params) {\n    if (params && params.database && params.userId) {\n      this.database = params.database;\n      this.userid = params.userId;\n    }\n    return this.getResources();\n  }\n\n  getResources() {\n    return Promise.all([\n      this.dataService.findAll(this.database, \"customers\", null, {name: 1})\n    ]).then(values => {\n      this.origItems = values[0];\n    }).catch(error => {\n      console.error(error);\n    });\n  }\n\n  launchDeleteDlg($index, item) {\n    let model = {\n      header: \"Confirm Delete\",\n      prompt: `Are you sure you want to delete this record?`\n    };\n    this.dialogService.open({\n      viewModel: ConfirmDeleteDialog, model: model, lock: false\n    }).whenClosed(response => {\n      if (!response.wasCancelled) {\n        this.dataService.deleteOne('quote-one',  'customers', item._id.$oid).then(response => {\n          this.items.splice($index, 1);\n          this.notifier.growl({\n            type: 'success', message: `Record deleted successfully!`\n          });\n        });\n      } else {\n        console.log('delete cancelled');\n      }\n    });       \n  }\n  newRecord() {\n    let recordid = 'new';\n    this.router.navigate(`customers/${recordid}`); \n  }  \n  loadRecord($index, item) {    \n    let recordid = item._id.$oid;    \n    this.router.navigate(`customers/${recordid}`);    \n  }    \n\n}\n\n","import {computedFrom} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport {BindingSignaler} from 'aurelia-templating-resources';\nimport {DialogService} from 'aurelia-dialog';\nimport {SessionService} from '../../services/session-service';\nimport {DataService} from '../../services/data-service';\nimport {Notifier} from '../../resources/elements/notifier/notifier';\nimport {AddressDialog} from '../../dialogs/address-dialog';\nimport {ConfirmDeleteDialog} from '../../dialogs/confirm-delete-dialog';\nimport {SubmitDialog} from '../../dialogs/submit-dialog';\nimport {LookupDialog} from '../../dialogs/lookup-dialog';\nimport {MemberDialog} from '../../dialogs/member-dialog';\nimport {VehicleDialog} from '../../dialogs/vehicle-dialog';\nimport {NoteDialog} from '../../dialogs/note-dialog';\nimport moment from 'moment';\n\nexport class Customer {\n  static inject = [Router, BindingSignaler, DialogService, SessionService, DataService, Notifier];\n\n  user;\n  database = 'quote-one';\n  currentItem;\n  origItem;\n  saveInterval;\n\n  constructor(router, signaler, dialogSvc, sessionSvc, dataSvc, notifier) {\n    this.router = router;\n    this.signaler = signaler;\n    this.dialogSvc = dialogSvc;\n    this.sessionSvc = sessionSvc;\n    this.dataSvc = dataSvc;\n    this.notifier = notifier;\n\n    console.debug('customer:ctor - sessionSvc.user', sessionSvc);\n    console.debug('customer:ctor - dataSvc');\n    this.user = sessionSvc.user;\n  }\n\n  @computedFrom(\n    'currentItem.first_name',\n    'currentItem.middle_name',\n    'currentItem.last_name',\n    'currentItem.birth_date',\n    'currentItem.gender',\n    'currentItem.social_security_number',\n    'currentItem.marital_status',\n    'currentItem.address.street',\n    'currentItem.address.city',\n    'currentItem.address.state',\n    'currentItem.address.postal_code',\n    'currentItem.address.county',\n    'currentItem.address.home_owner',\n    'currentItem.contact.email',\n    'currentItem.contact.home_number',\n    'currentItem.contact.mobile_number',\n    'currentItem.contact.preferred_contact_method',\n    'currentItem.driver.license_status',\n    'currentItem.driver.license_number',\n    'currentItem.driver.license_state',\n    'currentItem.driver.license_date',\n    'currentItem.driver.license_years_experience',\n    'currentItem.driver.relationship_to_customer',\n    'currentItem.driver.driver_type',\n    'currentItem.driver.military_student_type',\n    'currentItem.driver.military_paygrade',\n    'currentItem.household_members',\n    'currentItem.household_vehicles',\n    'currentItem.notes'\n  )\n  get hasChanged() {\n    return !this.isEqual(this.origItem, this.currentItem);\n  }\n  async activate(params) {\n    if (params.recordid) {\n      this.recordid = params.recordid;\n    }\n    this.heading = 'QuoteOne';\n    await this.getResources();\n    if (this.recordid === 'new') {\n      this.currentItem = this.newCustomer();\n      this.origItem = JSON.parse(JSON.stringify(this.currentItem));\n      return;\n    }\n    const response = await this.dataSvc.findById(this.database, 'customers', this.recordid);\n    this.currentItem = response;\n    this.origItem = JSON.parse(JSON.stringify(this.currentItem));\n  }\n  async deactivate() {\n    if (this.hasChanged) {\n      await this.save(true);\n    }\n  }\n  attached() {\n    this.saveInterval = setInterval(async () => {\n      if (this.hasChanged) {\n        this.notifier.growl({message: \"Auto-saving...\"});\n        await this.save(true);\n      }\n    }, 15000);\n  }\n  detached() {\n    clearInterval(this.saveInterval);\n  }\n  isEqual(oldValue, newValue) {\n    return JSON.stringify(oldValue) === JSON.stringify(newValue);\n  }\n  newCustomer() {\n    const d = Date.now();\n    let record = {\n      first_name: '',\n      middle_name: '',\n      last_name: '',\n      birth_date: '',\n      gender: '',\n      social_security_number: '',\n      marital_status: '',\n      address: {\n        street: '',\n        city: '',\n        state: '',\n        postal_code: '',\n        county: '',\n        home_owner: '',\n      },\n      contact: {\n        email: '',\n        home_number: '',\n        mobile_number: '',\n        preferred_contact_method: ''\n      },\n      driver: {\n        license_status: '',\n        license_number: '',\n        license_state: '',\n        license_date: '',\n        license_years_experience: '',\n        relationship_to_customer: '',\n        driver_type: '',\n        military_student_type: '',\n        military_paygrade: '',\n      },\n      household_members: [],\n      household_vehicles: [],\n      notes: [],\n      images: [],\n      created_date: d,\n      created_by: this.user.username,\n      modified_date: d,\n      modified_by: this.user.username,\n      is_active: true\n    };\n    return record;\n  }\n  async getResources() {\n    const values = await Promise.all([this.dataSvc.findAll(this.database, \"lookups\")]);\n    this.lookups = values[0];\n    console.debug('quote:getResources - lookupDialog', this.lookupDialog);    \n  }\n  getLookup(name) {\n    let lookup = this.lookups.find(l=> l.name===name);\n    return lookup;\n  }\n  getLookupItems(name) {\n    if (!this.lookups) return [];\n    let lookup = this.lookups.find(l => l.name === name);\n    if (lookup && lookup.fields) return lookup.fields;\n    return [];\n  }\n  async launchAddressDlg() {\n    let model = {\n      header: \"Address\",\n      close: \"Close\", \n      data: this.currentItem.address\n    };\n    const options = {viewModel: AddressDialog, model}\n    const closeResult = await this.dialogSvc.open(options).then(result => result.closeResult);\n    if (closeResult.wasCancelled) return;\n  }\n  async launchMemberDlg(index, record) {\n    let isNew = false;\n    if (!record) {\n      record = this.newHouseholdMember();\n      isNew = true;\n    }\n    let model = {\n      header: \"Member\",\n      close: \"Close\", \n      data: record,\n      lookups: this.lookups\n    };\n    const options = {viewModel: MemberDialog, model}\n    const closeResult = await this.dialogSvc.open(options).then(result => result.closeResult);\n    if (closeResult.wasCancelled) return;\n    record = closeResult.output;\n    if (isNew) {\n      this.addHouseholdMember(record);\n    } else {\n      this.currentItem.household_members[index] = record;\n    }\n    this.notifier.growl({message: \"Auto-saving...\"});\n    await this.save(true);\n  }\n  async launchVehicleDlg(index, record) {\n    let isNew = false;\n    if (!record) {\n      record = this.newHouseholdVehicle();\n      isNew = true;\n    }\n    let model = {\n      header: \"Vehicle\",\n      close: \"Close\", \n      data: record,\n      lookups: this.lookups\n    };\n    const options = {viewModel: VehicleDialog, model}\n    const closeResult = await this.dialogSvc.open(options).then(result => result.closeResult);\n    if (closeResult.wasCancelled) return;\n    record = closeResult.output;\n    if (isNew) {\n      this.addHouseholdVehicle(record);\n    } else {\n      this.currentItem.household_vehicles[index] = record;\n    }\n    this.notifier.growl({message: \"Auto-saving...\"});\n    await this.save(true);\n  }\n  async launchNoteDlg(index, record) {\n    let isNew = false;\n    if (!record) {\n      record = this.newNote();\n      isNew = true;\n    }\n    let model = {\n      header: \"Customer Note\",\n      close: \"Close\", \n      data: record,\n      lookups: this.lookups,\n      isNew\n    };\n    const options = {viewModel: NoteDialog, model}\n    const closeResult = await this.dialogSvc.open(options).then(result => result.closeResult);\n    if (closeResult.wasCancelled) return;\n    record = closeResult.output;\n    if (isNew) {\n      this.addNote(record);\n      this.notifier.growl({message: \"Auto-saving...\"});\n      await this.save(true);\n    }\n  }\n  async selectChange(e, key, title) {\n    if (e.key === 'F3' && this.sessionSvc.user.roles.includes('admin')) {\n      let model = {\n        data: {\n          database: 'quote-one', \n          collection: 'lookups', \n          header: title, \n          lookupName: key, \n          currentLookup: this.getLookup(key)\n        }\n      };\n      const options = {viewModel: LookupDialog, model}\n      const closeResult = await this.dialogSvc.open(options).then(result => result.closeResult);\n    } else {\n      return true;\n    }\n  }\n  setValue(e, src, srcField, targetField) {\n    let source = this[src];\n    let sField = source[srcField];\n    source[targetField] = sField;\n  }\n  disabled(value, ...args) {\n    return !args.includes(value);\n  }\n  newHouseholdVehicle() {\n    const d = Date.now();\n    let record = {\n      vin: '',\n      year: '',\n      make: '',\n      model: '',\n      description: '',\n      custom_equipment_type: '',\n      additional_electronic_type: '',\n      vehicle_use_code: '',\n      vehicle_symbol_code: '',\n      airbag_type: '',\n      created_date: d,\n      created_by: this.user.username,\n      modified_date: d,\n      modified_by: this.user.username,\n      is_active: true\n    };\n    return record;    \n  }\n  addHouseholdVehicle(record) {\n    this.currentItem.household_vehicles.push(record);\n    this.signaler.signal('update-vehicles');    \n  }\n  removeHouseholdVehicle(record, index) {\n    this.currentItem.household_vehicles.splice(index, 1);    \n    this.signaler.signal('update-vehicles');    \n  }\n  newHouseholdMember() {\n    const d = Date.now();\n    let record = {\n      first_name: '',\n      middle_name: '',\n      last_name: '',\n      birth_date: '',\n      gender: '',\n      social_security_number: '',\n      marital_status: '',\n      driver: {\n        license_status: '',\n        license_number: '',\n        license_state: '',\n        license_date: '',\n        license_years_experience: '',\n        relationship_to_customer: '',\n        driver_type: '',\n        military_student_type: '',\n        military_paygrade: '',\n      },\n      created_date: d,\n      created_by: this.user.username,\n      modified_date: d,\n      modified_by: this.user.username,\n      is_active: true\n    };\n    return record;    \n  }\n  addHouseholdMember(record) {\n    this.currentItem.household_members.push(record);\n    this.signaler.signal('update-members');\n  }\n  removeHouseholdMember(record, index) {\n    this.currentItem.household_members.splice(index, 1);    \n  }\n  newNote() {\n    const d = Date.now();\n    let record = {\n      note: '',\n      created_date: d,\n      created_by: this.user.username,\n      modified_date: d,\n      modified_by: this.user.username,\n      is_active: true\n    };\n    return record;    \n  }\n  addNote(record) {\n    this.currentItem.notes.push(record);\n    this.signaler.signal('update-notes');        \n  }\n  async save(ignoreNav) {\n    // if (this.userService.user.ability.cannot('execute', 'quote:save')) {    \n    //   this.notifier.growl({message:'You are not authorized to Save!', type: 'error'});    \n    //   return;   \n    // }\n    this.currentItem.is_active = true;\n    const response = await this.dataSvc.save(\"quote-one\", \"customers\", this.currentItem);\n    // console.log('quote:saveQuote - response', response);      \n    if (response.message) {\n      if (response.message.includes(\"Unique index constraint violated\")) {\n        this.notifier.growl({\n          type: \"error\", message: \"this name has already been taken. The name must be unique!\", showClose: true, timeout: 10000\n        });\n      } else {\n        this.notifier.growl({\n          type: \"error\", message: response.message, showClose: true, timeout: 10000\n        });\n      }\n    } else {\n      const view = \"customers\";\n      this.notifier.growl({message: \"Save complete!\"});\n      this.origItem = JSON.parse(JSON.stringify(this.currentItem));\n      this.signaler.signal('update-binding');      \n      if (!ignoreNav) {\n        this.router.navigateToRoute(view);\n      }\n    }\n  }\n  licenseDateChange(e, driver) {\n    let date = new Date(driver.license_date);\n    driver.license_years_experience = this.calculateAge(date); \n  }    \n  calculateAge(date) {\n    let birthYear = date.getFullYear();\n    let birthMonth = date.getMonth();\n    let birthDay = date.getDate();\n    let todayDate = new Date();\n    let todayYear = todayDate.getFullYear();\n    let todayMonth = todayDate.getMonth();\n    let todayDay = todayDate.getDate();\n    let age = todayYear - birthYear;\n    if (todayMonth < birthMonth - 1) {\n      age--;\n    }\n    if (birthMonth - 1 == todayMonth && todayDay < birthDay) {\n      age--;\n    }\n    return age;\n  }\n  manageImages() {\n    this.router.navigate(`quote/${this.recordid}/images`);     \n  }\n  computeDateTime(date) {\n    let today = moment(date).format(\"MM-DD-YYYY\");\n    let time = moment(date).format(\"HH:mm\");    \n    const format = `${today} ${time}`;\n    return format;\n  }\n  \n}\n","import {SessionService} from '../../services/session-service';\n\nexport class Callback {\n  static inject = [SessionService];\n\n  constructor(sessionSvc) {\n    this.sessionSvc = sessionSvc;\n    this.sessionSvc.handleAuthentication();\n  }\n}\n","export class AccessDenied {\n  \n  // imgUrl = \"/quoteone/src/views/access-denied/access-denied.jpg\";\n  imgUrl = \"static/access-denied.jpg\";\n\n  constructor() {\n\n  }\n}\n","import {DataService} from './data-service';\n\nexport class UserService {\n  static inject = [DataService];\n\n  isAuthenticated = false;\n  user = null;\n  userid;\n  isAdmin = false;\n\n  constructor(dataService) {\n    this.dataService = dataService;\n  }\n \n  authenticate(payload) {\n    let query = {email: payload.email, password: payload.password};\n    return this.dataService.findOne('frontendcreator-security', 'users', query)\n      .then((response) => {\n        if (response) {\n          this.userid = response._id.$oid;\n          this.isAuthenticated = (response && response.email == payload.email ? true : false);\n          return {\n            email: payload.email, \n            isAuthenticated: this.isAuthenticated\n          };          \n        } else {\n          return {\n            email: payload.email, \n            isAuthenticated: false\n          };\n        }\n      });\n  }\n\n  authorize(email) {\n    let query = {email: email};\n    return this.dataService.findOne('frontendcreator-security', 'user-profiles', query).then(profile => {\n      this.profile = JSON.parse(JSON.stringify(profile));\n      return profile;\n    });\n  }\n\n  setAvatar(avatar) {\n    this.profile.avatar = avatar;\n    this.user.avatar = avatar;\n    return this.dataService.save('frontendcreator-security', 'user-profiles', this.profile);\n  }\n}\n","import {FrameworkConfiguration} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport {EventAggregator} from 'aurelia-event-aggregator';\n\nexport class SessionService {\n  static inject = [Router, EventAggregator];\n\n  user;\n  auth0 = new auth0.WebAuth({\n    domain: 'quote1ins.auth0.com',\n    clientID: 'hy9l2I2xghH3f5_eiwGJqiVKEVdhGdce',\n    redirectUri: 'https://mattduffield.github.io/quoteone-dev/callback',\n    // redirectUri: 'http://localhost:9000/callback',\n    audience: 'https://quote1ins.auth0.com/userinfo',\n    responseType: 'token id_token',\n    scope: 'openid profile'\n  });\n\n  constructor(router, messageBus) {\n    this.router = router;\n    this.messageBus = messageBus;\n\n    if (localStorage.getItem('username') && \n      localStorage.getItem('email') && \n      localStorage.getItem('roles')) {\n      const username = localStorage.getItem('username');\n      const email = localStorage.getItem('email');\n      const roles = JSON.parse(localStorage.getItem('roles'));\n      this.user = {username, email, roles};\n    }\n  }\n  login() {\n    this.auth0.authorize();\n  }\n  handleAuthentication() {\n    this.auth0.parseHash((err, authResult) => {\n      if (authResult && authResult.accessToken && authResult.idToken) {\n        this.setSession(authResult);\n        this.router.navigate('');\n        this.messageBus.publish('authChange', { authenticated: true });\n      } else if (err) {\n        console.log(err);\n      }\n    });\n  }\n  setSession(authResult) {\n    // Set the time that the Access Token will expire at\n    let expiresAt = JSON.stringify(\n      authResult.expiresIn * 1000 + new Date().getTime()\n    );\n    this.user = {\n      username: authResult.idTokenPayload.nickname,\n      email: authResult.idTokenPayload.name,\n      roles: authResult.idTokenPayload['https://pegramins.com/roles']\n    };\n    localStorage.setItem('access_token', authResult.accessToken);\n    localStorage.setItem('id_token', authResult.idToken);\n    localStorage.setItem('expires_at', expiresAt);\n    localStorage.setItem('username', authResult.idTokenPayload.nickname);\n    localStorage.setItem('email', authResult.idTokenPayload.name);\n    localStorage.setItem('roles', JSON.stringify(authResult.idTokenPayload['https://pegramins.com/roles']));\n  }\n  logout() {\n    // Clear Access Token and ID Token from local storage\n    localStorage.removeItem('access_token');\n    localStorage.removeItem('id_token');\n    localStorage.removeItem('expires_at');\n    localStorage.removeItem('username');\n    localStorage.removeItem('email');\n    localStorage.removeItem('roles');\n    this.user = null;\n    this.messageBus.publish('authChange', { authenticated: false });\n    const {origin} = window.location;\n    const href = `${origin}/quoteone-dev`;\n    // const href = `${origin}/`;\n    window.location.href = href;\n  }\n  isAuthenticated() {\n    // Check whether the current time is past the\n    // Access Token's expiry time\n    const expiresAt = JSON.parse(localStorage.getItem('expires_at'));\n    const isTokenValid = new Date().getTime() < expiresAt;\n\n    if (isTokenValid) {\n      const username = localStorage.getItem('username');\n      const email = localStorage.getItem('email');\n      const roles = JSON.parse(localStorage.getItem('roles'));\n      this.user = {username, email, roles};\n    }\n    return isTokenValid;\n  }\n\n}\n","\nexport class Md5Service {\n\n  md5(string) {\n\n    function RotateLeft(lValue, iShiftBits) {\n      return (lValue<<iShiftBits) | (lValue>>>(32-iShiftBits));\n    }\n    function AddUnsigned(lX,lY) {\n      var lX4,lY4,lX8,lY8,lResult;\n      lX8 = (lX & 0x80000000);\n      lY8 = (lY & 0x80000000);\n      lX4 = (lX & 0x40000000);\n      lY4 = (lY & 0x40000000);\n      lResult = (lX & 0x3FFFFFFF)+(lY & 0x3FFFFFFF);\n      if (lX4 & lY4) {\n        return (lResult ^ 0x80000000 ^ lX8 ^ lY8);\n      }\n      if (lX4 | lY4) {\n        if (lResult & 0x40000000) {\n          return (lResult ^ 0xC0000000 ^ lX8 ^ lY8);\n        } else {\n          return (lResult ^ 0x40000000 ^ lX8 ^ lY8);\n        }\n      } else {\n        return (lResult ^ lX8 ^ lY8);\n      }\n    }\n    function F(x,y,z) { return (x & y) | ((~x) & z); }\n    function G(x,y,z) { return (x & z) | (y & (~z)); }\n    function H(x,y,z) { return (x ^ y ^ z); }\n    function I(x,y,z) { return (y ^ (x | (~z))); }\n    function FF(a,b,c,d,x,s,ac) {\n      a = AddUnsigned(a, AddUnsigned(AddUnsigned(F(b, c, d), x), ac));\n      return AddUnsigned(RotateLeft(a, s), b);\n    }\n    function GG(a,b,c,d,x,s,ac) {\n      a = AddUnsigned(a, AddUnsigned(AddUnsigned(G(b, c, d), x), ac));\n      return AddUnsigned(RotateLeft(a, s), b);\n    }\n    function HH(a,b,c,d,x,s,ac) {\n      a = AddUnsigned(a, AddUnsigned(AddUnsigned(H(b, c, d), x), ac));\n      return AddUnsigned(RotateLeft(a, s), b);\n    }\n    function II(a,b,c,d,x,s,ac) {\n      a = AddUnsigned(a, AddUnsigned(AddUnsigned(I(b, c, d), x), ac));\n      return AddUnsigned(RotateLeft(a, s), b);\n    }\n    function ConvertToWordArray(string) {\n      var lWordCount;\n      var lMessageLength = string.length;\n      var lNumberOfWords_temp1=lMessageLength + 8;\n      var lNumberOfWords_temp2=(lNumberOfWords_temp1-(lNumberOfWords_temp1 % 64))/64;\n      var lNumberOfWords = (lNumberOfWords_temp2+1)*16;\n      var lWordArray=Array(lNumberOfWords-1);\n      var lBytePosition = 0;\n      var lByteCount = 0;\n      while ( lByteCount < lMessageLength ) {\n        lWordCount = (lByteCount-(lByteCount % 4))/4;\n        lBytePosition = (lByteCount % 4)*8;\n        lWordArray[lWordCount] = (lWordArray[lWordCount] | (string.charCodeAt(lByteCount)<<lBytePosition));\n        lByteCount++;\n      }\n      lWordCount = (lByteCount-(lByteCount % 4))/4;\n      lBytePosition = (lByteCount % 4)*8;\n      lWordArray[lWordCount] = lWordArray[lWordCount] | (0x80<<lBytePosition);\n      lWordArray[lNumberOfWords-2] = lMessageLength<<3;\n      lWordArray[lNumberOfWords-1] = lMessageLength>>>29;\n      return lWordArray;\n    }\n    function WordToHex(lValue) {\n      var WordToHexValue=\"\",WordToHexValue_temp=\"\",lByte,lCount;\n      for (lCount = 0;lCount<=3;lCount++) {\n        lByte = (lValue>>>(lCount*8)) & 255;\n        WordToHexValue_temp = \"0\" + lByte.toString(16);\n        WordToHexValue = WordToHexValue + WordToHexValue_temp.substr(WordToHexValue_temp.length-2,2);\n      }\n      return WordToHexValue;\n    }\n    function Utf8Encode(string) {\n      string = string.replace(/\\r\\n/g,\"\\n\");\n      var utftext = \"\";\n\n      for (var n = 0; n < string.length; n++) {\n        var c = string.charCodeAt(n);\n\n        if (c < 128) {\n          utftext += String.fromCharCode(c);\n        } else if((c > 127) && (c < 2048)) {\n          utftext += String.fromCharCode((c >> 6) | 192);\n          utftext += String.fromCharCode((c & 63) | 128);\n        } else {\n          utftext += String.fromCharCode((c >> 12) | 224);\n          utftext += String.fromCharCode(((c >> 6) & 63) | 128);\n          utftext += String.fromCharCode((c & 63) | 128);\n        }\n      }\n      return utftext;\n    }\n    var x=Array();\n    var k,AA,BB,CC,DD,a,b,c,d;\n    var S11=7, S12=12, S13=17, S14=22;\n    var S21=5, S22=9 , S23=14, S24=20;\n    var S31=4, S32=11, S33=16, S34=23;\n    var S41=6, S42=10, S43=15, S44=21;\n\n    string = Utf8Encode(string);\n\n    x = ConvertToWordArray(string);\n\n    a = 0x67452301; b = 0xEFCDAB89; c = 0x98BADCFE; d = 0x10325476;\n\n    for (k=0;k<x.length;k+=16) {\n      AA=a; BB=b; CC=c; DD=d;\n      a=FF(a,b,c,d,x[k+0], S11,0xD76AA478);\n      d=FF(d,a,b,c,x[k+1], S12,0xE8C7B756);\n      c=FF(c,d,a,b,x[k+2], S13,0x242070DB);\n      b=FF(b,c,d,a,x[k+3], S14,0xC1BDCEEE);\n      a=FF(a,b,c,d,x[k+4], S11,0xF57C0FAF);\n      d=FF(d,a,b,c,x[k+5], S12,0x4787C62A);\n      c=FF(c,d,a,b,x[k+6], S13,0xA8304613);\n      b=FF(b,c,d,a,x[k+7], S14,0xFD469501);\n      a=FF(a,b,c,d,x[k+8], S11,0x698098D8);\n      d=FF(d,a,b,c,x[k+9], S12,0x8B44F7AF);\n      c=FF(c,d,a,b,x[k+10],S13,0xFFFF5BB1);\n      b=FF(b,c,d,a,x[k+11],S14,0x895CD7BE);\n      a=FF(a,b,c,d,x[k+12],S11,0x6B901122);\n      d=FF(d,a,b,c,x[k+13],S12,0xFD987193);\n      c=FF(c,d,a,b,x[k+14],S13,0xA679438E);\n      b=FF(b,c,d,a,x[k+15],S14,0x49B40821);\n      a=GG(a,b,c,d,x[k+1], S21,0xF61E2562);\n      d=GG(d,a,b,c,x[k+6], S22,0xC040B340);\n      c=GG(c,d,a,b,x[k+11],S23,0x265E5A51);\n      b=GG(b,c,d,a,x[k+0], S24,0xE9B6C7AA);\n      a=GG(a,b,c,d,x[k+5], S21,0xD62F105D);\n      d=GG(d,a,b,c,x[k+10],S22,0x2441453);\n      c=GG(c,d,a,b,x[k+15],S23,0xD8A1E681);\n      b=GG(b,c,d,a,x[k+4], S24,0xE7D3FBC8);\n      a=GG(a,b,c,d,x[k+9], S21,0x21E1CDE6);\n      d=GG(d,a,b,c,x[k+14],S22,0xC33707D6);\n      c=GG(c,d,a,b,x[k+3], S23,0xF4D50D87);\n      b=GG(b,c,d,a,x[k+8], S24,0x455A14ED);\n      a=GG(a,b,c,d,x[k+13],S21,0xA9E3E905);\n      d=GG(d,a,b,c,x[k+2], S22,0xFCEFA3F8);\n      c=GG(c,d,a,b,x[k+7], S23,0x676F02D9);\n      b=GG(b,c,d,a,x[k+12],S24,0x8D2A4C8A);\n      a=HH(a,b,c,d,x[k+5], S31,0xFFFA3942);\n      d=HH(d,a,b,c,x[k+8], S32,0x8771F681);\n      c=HH(c,d,a,b,x[k+11],S33,0x6D9D6122);\n      b=HH(b,c,d,a,x[k+14],S34,0xFDE5380C);\n      a=HH(a,b,c,d,x[k+1], S31,0xA4BEEA44);\n      d=HH(d,a,b,c,x[k+4], S32,0x4BDECFA9);\n      c=HH(c,d,a,b,x[k+7], S33,0xF6BB4B60);\n      b=HH(b,c,d,a,x[k+10],S34,0xBEBFBC70);\n      a=HH(a,b,c,d,x[k+13],S31,0x289B7EC6);\n      d=HH(d,a,b,c,x[k+0], S32,0xEAA127FA);\n      c=HH(c,d,a,b,x[k+3], S33,0xD4EF3085);\n      b=HH(b,c,d,a,x[k+6], S34,0x4881D05);\n      a=HH(a,b,c,d,x[k+9], S31,0xD9D4D039);\n      d=HH(d,a,b,c,x[k+12],S32,0xE6DB99E5);\n      c=HH(c,d,a,b,x[k+15],S33,0x1FA27CF8);\n      b=HH(b,c,d,a,x[k+2], S34,0xC4AC5665);\n      a=II(a,b,c,d,x[k+0], S41,0xF4292244);\n      d=II(d,a,b,c,x[k+7], S42,0x432AFF97);\n      c=II(c,d,a,b,x[k+14],S43,0xAB9423A7);\n      b=II(b,c,d,a,x[k+5], S44,0xFC93A039);\n      a=II(a,b,c,d,x[k+12],S41,0x655B59C3);\n      d=II(d,a,b,c,x[k+3], S42,0x8F0CCC92);\n      c=II(c,d,a,b,x[k+10],S43,0xFFEFF47D);\n      b=II(b,c,d,a,x[k+1], S44,0x85845DD1);\n      a=II(a,b,c,d,x[k+8], S41,0x6FA87E4F);\n      d=II(d,a,b,c,x[k+15],S42,0xFE2CE6E0);\n      c=II(c,d,a,b,x[k+6], S43,0xA3014314);\n      b=II(b,c,d,a,x[k+13],S44,0x4E0811A1);\n      a=II(a,b,c,d,x[k+4], S41,0xF7537E82);\n      d=II(d,a,b,c,x[k+11],S42,0xBD3AF235);\n      c=II(c,d,a,b,x[k+2], S43,0x2AD7D2BB);\n      b=II(b,c,d,a,x[k+9], S44,0xEB86D391);\n      a=AddUnsigned(a,AA);\n      b=AddUnsigned(b,BB);\n      c=AddUnsigned(c,CC);\n      d=AddUnsigned(d,DD);\n    }\n   \tvar temp = WordToHex(a)+WordToHex(b)+WordToHex(c)+WordToHex(d);\n\n   \treturn temp.toLowerCase();\n  }\n\n}","\nexport class GoogleAddressService {\n  constructor() { \n    this.isLoaded = false; \n    this.apiKey = 'AIzaSyDGp2JvL__cn0kHG1U-B4grxuJmwTktqqA'; \n  } \n  unload() { \n    console.log('unloading listener...'); \n    if (this.autocomplete) {\n      console.log('GoogleAddressService:unload - autocomplete', this.autocomplete);\n      // this.autocomplete.removeListener('place_changed', this.fillInAddress.bind(this)); \n    }\n  } \n  loadJS(url, callback, target) { \n    let scriptTag = document.createElement('script'); \n    scriptTag.id = 'google_places'; \n    scriptTag.src = url; \n    scriptTag.onload = callback; \n    target.appendChild(scriptTag); \n  } \n  init(inputSelector, data) { \n    let el = document.querySelector('#google_places'); \n    this.isLoaded = el ? true : false; \n    this.inputSelector = inputSelector; \n    this.inputElement = document.querySelector(this.inputSelector); \n    this.data = data; \n    if (this.isLoaded) { \n      this.loadCallback(); \n    } else { \n      this.loadJS(`https://maps.googleapis.com/maps/api/js?key=${this.apiKey}&libraries=places`, this.loadCallback.bind(this), document.body); \n    } \n  } \n  loadCallback(e) {\n    // Create the autocomplete object, restricting the search to geographical\n\n    // location types.\n    this.autocomplete = new google.maps.places.Autocomplete(this.inputElement, { types: ['geocode'] });\n    // When the user selects an address from the dropdown, populate the address\n\n    // fields in the form.\n    this.autocomplete.addListener('place_changed', this.fillInAddress.bind(this));\n  } \n  fillInAddress() {\n    // Get the place details from the autocomplete object.\n    let place = this.autocomplete.getPlace(); \n    let addr = place.address_components;\n    // console.log('fillInAddress - address', addr);\n    let street_number = addr.find(x => x.types.includes(\"street_number\"));\n    let route = addr.find(x => x.types.includes(\"route\"));\n    let locality = addr.find(x => x.types.includes(\"locality\"));\n    let administrative_area_level_2 = addr.find(x => x.types.includes(\"administrative_area_level_2\"));\n    let administrative_area_level_1 = addr.find(x => x.types.includes(\"administrative_area_level_1\"));\n    let postal_code = addr.find(x => x.types.includes(\"postal_code\"));\n    this.data['street'] = `${street_number.short_name} ${route.short_name}`; \n    this.data['city'] = `${locality.short_name}`; \n    this.data['state'] = `${administrative_area_level_1.short_name}`; \n    this.data['postal_code'] = `${postal_code.short_name}`; \n    this.data['county'] = `${administrative_area_level_2.short_name}`;\n  }\n  // Bias the autocomplete object to the user's geographical location,\n\n  // as supplied by the browser's 'navigator.geolocation' object.\n  geolocate() { \n    if (navigator.geolocation) { \n      navigator.geolocation.getCurrentPosition(function (position) { \n        let geolocation = { \n          lat: position.coords.latitude, \n          lng: position.coords.longitude \n        }; \n        let circle = new google.maps.Circle({ \n          center: geolocation, \n          radius: position.coords.accuracy \n        }); \n        this.autocomplete.setBounds(circle.getBounds()); \n      }); \n    } \n  }\n}\n","import {HttpClient, json} from 'aurelia-fetch-client';\n\nexport class EdmundsService {\n  \n  constructor() {\n    this.http = new HttpClient();\n    this.baseUrl = `https://api.edmunds.com/api/vehicle/v2/vins/`;\n    // `2G1FC3D33C9165616?fmt=json&api_key=mh8k6smtg9x29eva8vazx75j`;\n    this.fmt = 'json';\n    // this.apiKey = 'mh8k6smtg9x29eva8vazx75j';\n    this.apiKey = 'k6hjmkgm2kym5db894t8nah7';\n    this.configureFetch();\n  }\n  configureFetch() {\n    // console.log('EdmundsService:configureFetch', this.http);    \n    // this.http = new this.HttpClient();\n    this.http.configure(config => {\n      config.withBaseUrl(this.baseUrl).withDefaults({\n        headers: {\n          'Content-Type': 'application/json',\n          // 'X-Requested-With': 'Fetch'\n        }\n      }).withInterceptor({\n        request(request) {\n          console.log(`Requesting ${request.method} ${request.url}`);\n          return request;\n          // you can return a modified Request, or you can short-circuit the request          \n        }, response(response) {\n          console.log(`Received ${response.status} ${response.url}`);\n          return response;\n\n          // you can return a modified Response \n        }\n      });\n    });\n  }\n  performLookup(vin) {\n    // vin = '2G1FC3D33C9165616';\n    return this.http.fetch(`${vin}?fmt=${this.fmt}&api_key=${this.apiKey}`, {\n      method: 'get'\n    }).then(response => response.json()).then(data => {\n      return data;\n    });\n  }\n}","import {HttpClient, json} from 'aurelia-fetch-client';\n\nexport class DiscoveryInsuranceService { \n  static inject = [HttpClient];\n\n  constructor(http) { \n    this.http = http; \n    this.baseUrl = `https://www.dicins.com/JenesisQuoting/JenQuoteServlet`; \n    this.counter = 0; \n    this.initReq(); \n    this.configureHttp(); \n    let url = 'https://cdn.rawgit.com/abdmob/x2js/master/xml2json'; \n    this.loadJS(url, this.onScriptLoaded.bind(this)); \n  } \n  loadJS(url, callback) { \n    require.config({ \n      paths: { \n        \"x2js\": url \n      }, \n      callback: callback, \n      waitSeconds: 40 \n    }); \n  } \n  onScriptLoaded(e) {\n    require([\"x2js\"], (X2JS) => { \n      this.X2JS = X2JS;\n      // console.log('script loaded...');\n    }); \n  } \n  initReq() { \n    this.req = { \n      credentials: { \n        CustLoginId: 432, \n        CustPswd: 'Testwithme' \n      }, \n      RqUID: '', \n      TransactionRequestDt: '', \n      TransactionEffectiveDt: '' \n    }; \n  } \n  configureHttp() { \n    this.http.configure(config => { \n      config.withBaseUrl(this.baseUrl); \n      config.withHeader('Content-Type', 'application/xml'); \n      config.withInterceptor({ \n        request(message) { \n          return message;\n        }, \n        requestError(error) { \n          throw error; \n        }, \n        response(message) { \n          return message; \n        }, \n        responseError(error) { \n          throw error; \n        } \n      }); \n    }); \n  } \n  beginRequest(data) { \n    return this.beginHttpRequest(JSON.parse(data)); \n  } \n  beginHttpRequest(data) { \n    let xml = this.buildAcord2(data.SignonRq, data.InsuranceSvcRq); \n    console.log('request', xml); \n    return this.http.post('', xml).then(response => { \n      let x2js = new this.X2JS(); \n      let json = x2js.xml_str2json(response); \n      console.log('JSON response', json, 'XML response', response); \n      return response; \n    }); \n  } \n  buildSignonRq(SignonRq) { \n    let xml = `\n<SignonRq>\n    <SignonPswd>\n        <SignonRoleCd>Agent</SignonRoleCd>\n        <CustId>\n            <SPName>jenesis.com</SPName>\n            <CustPermId>JEN</CustPermId>\n            <CustLoginId>${SignonRq.SignonPswd.CustId.CustLoginId}</CustLoginId>\n        </CustId>\n        <CustPswd>\n            <EncryptionTypeCd>NONE</EncryptionTypeCd>\n            <Pswd>${SignonRq.SignonPswd.CustPswd.Pswd}</Pswd>\n        </CustPswd>\n    </SignonPswd>\n    <ClientDt>${SignonRq.ClientDt}</ClientDt>\n    <CustLangPref>en-US</CustLangPref>\n    <Producer>\n        <ProducerInfo>\n            <ContractNumber>${SignonRq.Producer.ProducerInfo.ContractNumber}</ContractNumber>\n            <ProducerRoleCd>Agency</ProducerRoleCd>\n        </ProducerInfo>\n    </Producer>\n    <ClientApp>\n        <Org>QuoteOne Software</Org>\n        <Name>QuoteOne</Name>\n        <Version>1.0</Version>\n    </ClientApp>\n</SignonRq> `; \n    return xml.trim(); \n  } \n  buildInsuranceSvcRq(InsuranceSvcRq) { \n    let xml = `\n<InsuranceSvcRq>\n    <RqUID>${InsuranceSvcRq.RqUID}</RqUID> \n    ${this.buildPersAutoPolicyQuoteIndRq(InsuranceSvcRq.PersAutoPolicyQuoteIndRq)} \n</InsuranceSvcRq> `; \n    return xml.trim(); \n  } \n  buildPersAutoPolicyQuoteIndRq(PersAutoPolicyQuoteIndRq) { \n    let xml = `\n<PersAutoPolicyQuoteInqRq>\n  <RqUID>${PersAutoPolicyQuoteIndRq.RqUID}</RqUID>\n  <TransactionRequestDt>${PersAutoPolicyQuoteIndRq.TransactionRequestDt}</TransactionRequestDt>\n  <TransactionEffectiveDt>${PersAutoPolicyQuoteIndRq.TransactionEffectiveDt}</TransactionEffectiveDt>\n  <CurCd>${PersAutoPolicyQuoteIndRq.CurCd}</CurCd> \n  ${this.buildInsuredOrPrincipal(PersAutoPolicyQuoteIndRq.InsuredOrPrincipal)} \n  ${this.buildPersPolicy(PersAutoPolicyQuoteIndRq.PersPolicy)} \n  ${this.buildPersAutoLineBusiness(PersAutoPolicyQuoteIndRq.PersAutoLineBusiness)} \n  ${this.buildLocation(PersAutoPolicyQuoteIndRq.Location)} \n</PersAutoPolicyQuoteInqRq> `; \n    return xml.trim(); \n  } \n  buildInsuredOrPrincipal(InsuredOrPrincipal) { \n    let xml = `\n<InsuredOrPrincipal> \n  ${this.buildGeneralPartyInfo(InsuredOrPrincipal.GeneralPartyInfo)} \n  ${this.buildInsuredOrPrincipalInfo(InsuredOrPrincipal.InsuredOrPrincipalInfo)} \n</InsuredOrPrincipal> `; \n    return xml.trim(); \n  } \n  buildGeneralPartyInfo(GeneralPartyInfo) { \n    let xml = `\n<GeneralPartyInfo> \n  ${this.buildNameInfo(GeneralPartyInfo.NameInfo)} \n  ${this.buildAddr(GeneralPartyInfo.Addr)} \n  ${this.buildCommunications(GeneralPartyInfo.Communications)} \n</GeneralPartyInfo> `; \n    return xml.trim(); \n  } \n  buildNameInfo(NameInfo) { \n    let xml = `\n<NameInfo>\n    <PersonName>\n        <Surname>${NameInfo.PersonName.Surname}</Surname>\n        <GivenName>${NameInfo.PersonName.GivenName}</GivenName>\n    </PersonName>\n    <TaxIdentity>\n        <TaxIdTypeCd />\n        <TaxId /> </TaxIdentity>\n</NameInfo> `; \n    return xml.trim(); \n  } \n  buildAddr(Addr) { \n    let xml = `\n<Addr>\n    <AddrTypeCd>${Addr.AddrTypeCd}</AddrTypeCd>\n    <Addr1>${Addr.Addr1}</Addr1>\n    <City>${Addr.City}</City>\n    <StateProvCd>${Addr.StateProvCd}</StateProvCd>\n    <PostalCode>${Addr.PostalCode}</PostalCode>\n    <County>${Addr.County}</County>\n</Addr> `; \n    return xml.trim(); \n  } \n  buildCommunications(Communications) { \n    let xml = `\n<Communications> \n  ${this.buildPhoneInfo(Communications.PhoneInfo)} \n  ${this.buildEmailInfo(Communications.EmailInfo)} \n</Communications> `; \n    return xml.trim(); \n  } \n  buildPhoneInfo(PhoneInfo) { \n    let xml = ''; \n    PhoneInfo.forEach((item) => { \n      let pi = `\n<PhoneInfo>\n    <PhoneTypeCd>${item.PhoneTypeCd}</PhoneTypeCd>\n    <CommunicationUseCd>${item.CommunicationUseCd}</CommunicationUseCd>\n    <PhoneNumber>${item.PhoneNumber}</PhoneNumber>\n</PhoneInfo> `; \n      xml += pi; \n    }); \n    return xml.trim(); \n  } \n  buildEmailInfo(EmailInfo) { \n    let xml = `\n<EmailInfo>\n    <CommunicationUseCd />\n    <EmailAddr /> </EmailInfo> `; \n    return xml.trim(); \n  } \n  buildInsuredOrPrincipalInfo(InsuredOrPrincipalInfo) { \n    let xml = `\n<InsuredOrPrincipalInfo>\n    <InsuredOrPrincipalRoleCd>${InsuredOrPrincipalInfo.InsuredOrPrincipalRoleCd}</InsuredOrPrincipalRoleCd> \n    ${this.buildPersonInfo(InsuredOrPrincipalInfo.PersonInfo)} \n    ${this.buildPrincipalInfo(InsuredOrPrincipalInfo.PrincipalInfo)} \n</InsuredOrPrincipalInfo> `; \n    return xml.trim(); \n  } \n  buildPersonInfo(PersonInfo) { \n    let xml = `\n<PersonInfo>\n    <GenderCd>${PersonInfo.GenderCd}</GenderCd>\n    <BirthDt>${PersonInfo.BirthDt}</BirthDt>\n    <MaritalStatusCd>${PersonInfo.MaritalStatusCd}</MaritalStatusCd>\n</PersonInfo> `; \n    return xml.trim(); \n  } \n  buildPrincipalInfo(PrincipalInfo) { \n    let xml = `\n<PrincipalInfo>\n    <QuestionAnswer>\n        <QuestionCd>${PrincipalInfo.QuestionAnswer.QuestionCd}</QuestionCd>\n        <YesNoCd>${PrincipalInfo.QuestionAnswer.YesNoCd}</YesNoCd>\n    </QuestionAnswer>\n</PrincipalInfo> `; \n    return xml.trim(); \n  } \n  buildPersPolicy(PersPolicy) { \n    let xml = `\n<PersPolicy>\n    <LOBCd>${PersPolicy.LOBCd}</LOBCd> \n    ${this.buildContractTerm(PersPolicy.ContractTerm)} \n    ${this.buildQuoteInfo(PersPolicy.QuoteInfo)} \n    ${this.buildPersApplicationInfo(PersPolicy.PersApplicationInfo)} \n    ${this.buildDriverVeh(PersPolicy.DriverVeh)} \n</PersPolicy> `; \n    return xml.trim(); \n  } \n  buildContractTerm(ContractTerm) { \n    let xml = `\n<ContractTerm>\n    <EffectiveDt>${ContractTerm.EffectiveDt}</EffectiveDt>\n    <ExpirationDt>${ContractTerm.ExpirationDt}</ExpirationDt> \n    ${this.buildDurationPeriod(ContractTerm.DurationPeriod)} \n</ContractTerm> `; \n    return xml.trim(); \n  } \n  buildDurationPeriod(DurationPeriod) { \n    let xml = `\n<DurationPeriod>\n    <NumUnits>${DurationPeriod.NumUnits}</NumUnits>\n    <UnitMeasurementCd>${DurationPeriod.UnitMeasurementCd}</UnitMeasurementCd>\n</DurationPeriod> `; \n    return xml.trim(); \n  } \n  buildQuoteInfo(QuoteInfo) { \n    let xml = `\n<QuoteInfo>\n    <CompanysQuoteNumber>${QuoteInfo.CompanysQuoteNumber}</CompanysQuoteNumber>\n</QuoteInfo> `; \n    return xml.trim(); \n  } \n  buildPersApplicationInfo(PersApplicationInfo) { \n    let xml = `\n<PersApplicationInfo>\n    <InsuredOrPrincipal />\n    <ResidenceOwnedRentedCd>${PersApplicationInfo.ResidenceOwnedRentedCd}</ResidenceOwnedRentedCd>\n</PersApplicationInfo> `; \n    return xml.trim(); \n  } \n  buildDriverVeh(DriverVeh) { \n    let xml = ''; \n    DriverVeh.forEach((item, index) => { \n      let dv = `\n<DriverVeh VehRef=\"veh_${index + 1}\" DriverRef=\"drv_${index + 1}\">\n    <OwnedVehInd>${index + 1}</OwnedVehInd>\n</DriverVeh> `; \n      xml += dv; \n    });\n    return xml.trim(); \n  } \n  buildPersAutoLineBusiness(PersAutoLineBusiness) { \n    let xml = `\n<PersAutoLineBusiness>\n    <LOBCd>${PersAutoLineBusiness.LOBCd}</LOBCd> \n    ${this.buildPersDriver(PersAutoLineBusiness.PersDriver)} \n    ${this.buildPersVeh(PersAutoLineBusiness.PersVeh)} \n</PersAutoLineBusiness> `; \n    return xml.trim(); \n  } \n  buildPersDriver(PersDriver) { \n    let xml = ''; \n    PersDriver.forEach((item, index) => { \n      let pd = `\n<PersDriver id=\"drv_${index + 1}\"> \n  ${this.buildGeneralPartyInfo(item.GeneralPartyInfo)}\n  <DriverInfo> \n    ${this.buildPersonInfo(item.DriverInfo.PersonInfo)} \n    ${this.buildLicense(item.DriverInfo.License)} \n  </DriverInfo> \n  ${this.buildPersDriverInfo(item.PersDriverInfo)} \n</PersDriver> `; \n      xml += pd; \n    }); \n    return xml.trim(); \n  } \n  buildLicense(License) { \n    let xml = `\n<License>\n  <LicenseTypeCd>${License.LicenseTypeCd}</LicenseTypeCd>\n  <LicenseStatusCd>${License.LicenseStatusCd}</LicenseStatusCd>\n  <LicensedDt>${License.LicenseDt}</LicensedDt>\n  <YearsExperience>${License.YearsExperience}</YearsExperience>\n  <LicensePermitNumber>${License.LicensePermitNumber}</LicensePermitNumber>\n  <StateProvCd>${License.StateProvCd}</StateProvCd>\n</License> `; \n    return xml.trim(); \n  } \n  buildPersDriverInfo(PersDriverInfo) { \n    let xml = `\n<PersDriverInfo>\n  <DriverRelationshipToApplicantCd>${PersDriverInfo.DriverRelationshipToApplicantCd}</DriverRelationshipToApplicantCd>\n  <DriverPoints>${PersDriverInfo.DriverPoints}</DriverPoints>\n  <DriverTypeCd>${PersDriverInfo.DriverTypeCd}</DriverTypeCd>\n  <GoodStudentCd>${PersDriverInfo.GoodStudentCd}</GoodStudentCd>\n</PersDriverInfo> `; \n    return xml.trim(); \n  } \n  buildPersVeh(PersVeh) { \n    let xml = ''; \n    PersVeh.forEach((item, index) => { \n      let pv = `\n<PersVeh id=\"veh_${index + 1}\" LocationRef=\"gar_${index + 1}\">\n  <Manufacturer>${item.Manufacturer}</Manufacturer>\n  <Model>${item.Model}</Model>\n  <ModelYear>${item.ModelYear}</ModelYear>\n  <VehBodyTypeCd>${item.VehBodyTypeCd}</VehBodyTypeCd>\n  <LeasedVehInd>${item.LeasedVehInd}</LeasedVehInd>\n  <TerritoryCd />\n  <VehIdentificationNumber>${item.VehIdentificationNumber}</VehIdentificationNumber>\n  <VehSymbolCd>${item.VehSymbolCd}</VehSymbolCd>\n  <NonOwnedVehInd>${item.NonOwnedVehInd}</NonOwnedVehInd>\n  <VehUseCd>${item.VehUseCd}</VehUseCd>\n  <AirBagTypeCd>${item.AirBagTypeCd}</AirBagTypeCd> \n  ${this.buildCoverage(item.Coverage)} \n</PersVeh> `; \n      xml += pv; \n    }); \n    return xml.trim(); \n  } \n  buildCoverage(Coverage) { \n    let xml = ''; \n    Coverage.forEach((item, index) => { \n      let c = `\n<Coverage>\n  <CoverageCd>${item.CoverageCd}</CoverageCd>\n  <CoverageDesc>${item.CoverageDesc || ''}</CoverageDesc> \n  ${this.buildDeductible(item)} \n  ${this.buildLimit(item.Limit)} \n</Coverage> `; \n      xml += c; \n    }); \n    return xml.trim(); \n  } \n  buildDeductible(Coverage) { \n    let xml = ''; \n    if (Coverage.Deductible) { \n      xml += `\n<Deductible>\n  <FormatInteger>${Coverage.Deductible.FormatInteger}</FormatInteger>\n</Deductible>`; \n    } \n    return xml.trim(); \n  } \n  buildLimit(Limit) { \n    let xml = ''; \n    if (!Limit) return xml; \n    Limit.forEach((item, index) => { \n      let l = `\n<Limit>\n  <FormatInteger>${item.FormatInteger}</FormatInteger>`; \n      if (item.LimitAppliesToCd) { \n        l += `\n  <LimitAppliesToCd>${item.LimitAppliesToCd}</LimitAppliesToCd>`; \n      } \n      l += ` </Limit>`; \n      xml += l; \n    }); \n    return xml.trim(); \n  } \n  buildLocation(Location) { \n    let xml = ''; \n    Location.forEach((item, index) => { \n      let l = `\n<Location id=\"gar_${index + 1}\">\n  <ItemIdInfo /> ${this.buildAddr(item.Addr)} </Location> `; \n      xml += l; \n    }); \n    return xml.trim(); \n  } \n  buildAcord2(signonRq, insuranceSvcRq) {\n    console.log('buildAcord2', signonRq, insuranceSvcRq); \n    let xml = `\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!--XML file generated by FCS Acord Ver.1.11-->\n<ACORD xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.ACORD.org/standards/PC_Surety/ACORD1.11.0/xml/acord-pcs-v1_11_0-ns-nodoc-codes.xsd\">\n  ${this.buildSignonRq(signonRq)}\n  ${this.buildInsuranceSvcRq(insuranceSvcRq)}\n</ACORD> `; \n    return xml.trim(); \n  } \n  buildAcord() { \n    let xml = `\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!--XML file generated by FCS Acord Ver.1.11-->\n<ACORD xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.ACORD.org/standards/PC_Surety/ACORD1.11.0/xml/acord-pcs-v1_11_0-ns-nodoc-codes.xsd\">\n  <SignonRq>\n    <SignonPswd>\n      <SignonRoleCd>Agent</SignonRoleCd>\n      <CustId>\n        <SPName>jenesis.com</SPName>\n        <CustPermId>JEN</CustPermId>\n        <CustLoginId>${this.req.credentials.CustLoginId}</CustLoginId>\n      </CustId>\n      <CustPswd>\n        <EncryptionTypeCd>NONE</EncryptionTypeCd>\n        <Pswd>${this.req.credentials.CustPswd}</Pswd>\n      </CustPswd>\n    </SignonPswd>\n    <ClientDt>${this.req.TransactionRequestDt}</ClientDt>\n    <CustLangPref>en-US</CustLangPref>\n    <Producer>\n      <ProducerInfo>\n        <ContractNumber>${this.req.credentials.CustLoginId}</ContractNumber>\n        <ProducerRoleCd>Agency</ProducerRoleCd>\n      </ProducerInfo>\n    </Producer>\n    <ClientApp>\n      <Org>Jenesis Software</Org>\n      <Name>Jenesis RTR</Name>\n      <Version>1.0</Version>\n    </ClientApp>\n  </SignonRq>\n  <InsuranceSvcRq>\n    <RqUID>20161128-001</RqUID>\n    <PersAutoPolicyQuoteInqRq>\n      <RqUID>20161128-001</RqUID>\n      <TransactionRequestDt>${this.req.TransactionRequestDt}</TransactionRequestDt>\n      <TransactionEffectiveDt>${this.req.TransactionEffectiveDt}</TransactionEffectiveDt>\n      <CurCd>USD</CurCd>\n      <InsuredOrPrincipal>\n        <GeneralPartyInfo>\n          <NameInfo>\n            <PersonName>\n              <Surname>Turner</Surname>\n              <GivenName>Pamela</GivenName>\n            </PersonName>\n            <TaxIdentity>\n              <TaxIdTypeCd />\n              <TaxId /> \n            </TaxIdentity>\n          </NameInfo>\n          <Addr>\n            <AddrTypeCd>StreetAddress</AddrTypeCd>\n            <Addr1>2552 Forrest Drive</Addr1>\n            <City>Kinston</City>\n            <StateProvCd>NC</StateProvCd>\n            <PostalCode>28504</PostalCode>\n            <County>Lenoir</County>\n          </Addr>\n          <Communications>\n            <PhoneInfo>\n              <PhoneTypeCd>Phone</PhoneTypeCd>\n              <CommunicationUseCd>Home</CommunicationUseCd>\n              <PhoneNumber>252-5231200</PhoneNumber>\n            </PhoneInfo>\n            <PhoneInfo>\n              <PhoneTypeCd>Cell</PhoneTypeCd>\n              <CommunicationUseCd />\n              <PhoneNumber /> \n            </PhoneInfo>\n            <EmailInfo>\n              <CommunicationUseCd />\n              <EmailAddr /> \n            </EmailInfo>\n          </Communications>\n        </GeneralPartyInfo>\n        <InsuredOrPrincipalInfo>\n          <InsuredOrPrincipalRoleCd>Insured</InsuredOrPrincipalRoleCd>\n          <PersonInfo>\n            <GenderCd>F</GenderCd>\n            <BirthDt>1963-05-21</BirthDt>\n            <MaritalStatusCd>M</MaritalStatusCd>\n          </PersonInfo>\n          <PrincipalInfo>\n            <QuestionAnswer>\n              <QuestionCd>Credit</QuestionCd>\n              <YesNoCd>NO</YesNoCd>\n            </QuestionAnswer>\n          </PrincipalInfo>\n        </InsuredOrPrincipalInfo>\n      </InsuredOrPrincipal>\n      <PersPolicy>\n        <LOBCd>AUTO</LOBCd>\n        <ContractTerm>\n          <EffectiveDt>2016-12-15</EffectiveDt>\n          <ExpirationDt>2017-06-15</ExpirationDt>\n          <DurationPeriod>\n            <NumUnits>6</NumUnits>\n            <UnitMeasurementCd>MON</UnitMeasurementCd>\n          </DurationPeriod>\n        </ContractTerm>\n        <QuoteInfo>\n          <CompanysQuoteNumber>541</CompanysQuoteNumber>\n        </QuoteInfo>\n        <PersApplicationInfo>\n          <InsuredOrPrincipal />\n          <ResidenceOwnedRentedCd>OWNED</ResidenceOwnedRentedCd>\n        </PersApplicationInfo>\n        <DriverVeh VehRef=\"veh_1\" DriverRef=\"drv_1\">\n          <OwnedVehInd>1</OwnedVehInd>\n        </DriverVeh>\n        <DriverVeh VehRef=\"veh_2\" DriverRef=\"drv_2\">\n          <OwnedVehInd>1</OwnedVehInd>\n        </DriverVeh>\n      </PersPolicy>\n      <PersAutoLineBusiness>\n        <LOBCd>AUTO</LOBCd>\n        <PersDriver id=\"drv_1\">\n          <GeneralPartyInfo>\n            <NameInfo>\n              <PersonName>\n                <Surname>Turner</Surname>\n                <GivenName>Pamela</GivenName>\n              </PersonName>\n              <TaxIdentity>\n                <TaxIdTypeCd />\n                <TaxId /> \n              </TaxIdentity>\n            </NameInfo>\n            <Addr>\n              <AddrTypeCd>StreetAddress</AddrTypeCd>\n              <Addr1>2552 Forrest Drive</Addr1>\n              <City>Kinston</City>\n              <StateProvCd>NC</StateProvCd>\n              <PostalCode>28504</PostalCode>\n              <County>Lenoir</County>\n            </Addr>\n            <Communications>\n              <PhoneInfo>\n                <PhoneTypeCd>Phone</PhoneTypeCd>\n                <CommunicationUseCd>Home</CommunicationUseCd>\n                <PhoneNumber>252-5231200</PhoneNumber>\n              </PhoneInfo>\n              <PhoneInfo>\n                <PhoneTypeCd>Cell</PhoneTypeCd>\n                <CommunicationUseCd />\n                <PhoneNumber /> \n              </PhoneInfo>\n              <EmailInfo>\n                <CommunicationUseCd />\n                <EmailAddr /> \n              </EmailInfo>\n            </Communications>\n          </GeneralPartyInfo>\n          <DriverInfo>\n            <PersonInfo>\n              <GenderCd>F</GenderCd>\n              <BirthDt>1963-05-21</BirthDt>\n              <MaritalStatusCd>M</MaritalStatusCd>\n            </PersonInfo>\n            <License>\n              <LicenseTypeCd>Driver</LicenseTypeCd>\n              <LicenseStatusCd>Active</LicenseStatusCd>\n              <LicensedDt>1979-12-15</LicensedDt>\n              <YearsExperience>37</YearsExperience>\n              <LicensePermitNumber>6081790</LicensePermitNumber>\n              <StateProvCd>NC</StateProvCd>\n            </License>\n          </DriverInfo>\n          <PersDriverInfo>\n            <DriverRelationshipToApplicantCd>IN</DriverRelationshipToApplicantCd>\n            <DriverPoints>0</DriverPoints>\n            <DriverTypeCd>P</DriverTypeCd>\n            <GoodStudentCd>N</GoodStudentCd>\n          </PersDriverInfo>\n        </PersDriver>\n        <PersDriver id=\"drv_2\">\n          <GeneralPartyInfo>\n            <NameInfo>\n              <PersonName>\n                <Surname>Turner</Surname>\n                <GivenName>Steven</GivenName>\n              </PersonName>\n              <TaxIdentity>\n                <TaxIdTypeCd />\n                <TaxId /> \n              </TaxIdentity>\n            </NameInfo>\n            <Addr>\n              <AddrTypeCd>StreetAddress</AddrTypeCd>\n              <Addr1>2552 Forrest Drive</Addr1>\n              <City>Kinston</City>\n              <StateProvCd>NC</StateProvCd>\n              <PostalCode>28504</PostalCode>\n              <County>Lenoir</County>\n            </Addr>\n            <Communications>\n              <PhoneInfo>\n                <PhoneTypeCd>Phone</PhoneTypeCd>\n                <CommunicationUseCd>Home</CommunicationUseCd>\n                <PhoneNumber>252-5231200</PhoneNumber>\n              </PhoneInfo>\n              <PhoneInfo>\n                <PhoneTypeCd>Cell</PhoneTypeCd>\n                <CommunicationUseCd />\n                <PhoneNumber /> \n              </PhoneInfo>\n              <EmailInfo>\n                <CommunicationUseCd />\n                <EmailAddr /> \n              </EmailInfo>\n            </Communications>\n          </GeneralPartyInfo>\n          <DriverInfo>\n            <PersonInfo>\n              <GenderCd>M</GenderCd>\n              <BirthDt>1962-02-01</BirthDt>\n              <MaritalStatusCd>M</MaritalStatusCd>\n            </PersonInfo>\n            <License>\n              <LicenseTypeCd>Driver</LicenseTypeCd>\n              <LicenseStatusCd>Active</LicenseStatusCd>\n              <LicensedDt>1978-12-15</LicensedDt>\n              <YearsExperience>38</YearsExperience>\n              <LicensePermitNumber>5544712</LicensePermitNumber>\n              <StateProvCd>NC</StateProvCd>\n            </License>\n          </DriverInfo>\n          <PersDriverInfo>\n            <DriverRelationshipToApplicantCd>SP</DriverRelationshipToApplicantCd>\n            <DriverPoints>0</DriverPoints>\n            <DriverTypeCd>P</DriverTypeCd>\n            <GoodStudentCd /> \n          </PersDriverInfo>\n        </PersDriver>\n        <PersVeh id=\"veh_1\" LocationRef=\"gar_1\">\n          <Manufacturer>GMC</Manufacturer>\n          <Model>CANYON EXTENDED CAB SLT</Model>\n          <ModelYear>2010</ModelYear>\n          <VehBodyTypeCd></VehBodyTypeCd>\n          <LeasedVehInd>1</LeasedVehInd>\n          <TerritoryCd />\n          <VehIdentificationNumber>1GTKTFDE0A</VehIdentificationNumber>\n          <VehSymbolCd>14</VehSymbolCd>\n          <NonOwnedVehInd>0</NonOwnedVehInd>\n          <VehUseCd>1B</VehUseCd>\n          <AirBagTypeCd>FrontBoth</AirBagTypeCd>\n          <Coverage>\n            <CoverageCd>BI</CoverageCd>\n            <CoverageDesc>Bodily Injury</CoverageDesc>\n            <Limit>\n              <FormatInteger>100000</FormatInteger>\n              <LimitAppliesToCd>PerPers</LimitAppliesToCd>\n            </Limit>\n            <Limit>\n              <FormatInteger>300000</FormatInteger>\n              <LimitAppliesToCd>PerAcc</LimitAppliesToCd>\n            </Limit>\n          </Coverage>\n          <Coverage>\n            <CoverageCd>PD</CoverageCd>\n            <CoverageDesc>Property Damage</CoverageDesc>\n            <Limit>\n              <FormatInteger>50000</FormatInteger>\n              <LimitAppliesToCd>PerAcc</LimitAppliesToCd>\n            </Limit>\n          </Coverage>\n          <Coverage>\n            <CoverageCd>MEDPM</CoverageCd>\n            <CoverageDesc>Medical</CoverageDesc>\n            <Limit>\n              <FormatInteger>500</FormatInteger>\n              <LimitAppliesToCd>PerPers</LimitAppliesToCd>\n            </Limit>\n          </Coverage>\n          <Coverage>\n            <CoverageCd>UMUIM</CoverageCd>\n            <CoverageDesc>Uninsured Underinsured Motorist-BI</CoverageDesc>\n            <Limit>\n              <FormatInteger>100000</FormatInteger>\n              <LimitAppliesToCd>PerPers</LimitAppliesToCd>\n            </Limit>\n            <Limit>\n              <FormatInteger>300000</FormatInteger>\n              <LimitAppliesToCd>PerAcc</LimitAppliesToCd>\n            </Limit>\n          </Coverage>\n          <Coverage>\n            <CoverageCd>UMPD</CoverageCd>\n            <CoverageDesc>Uninsured Motorist-PD</CoverageDesc>\n            <Limit>\n              <FormatInteger>50000</FormatInteger>\n              <LimitAppliesToCd>PerAcc</LimitAppliesToCd>\n            </Limit>\n          </Coverage>\n          <Coverage>\n            <CoverageCd>COMP</CoverageCd>\n            <CoverageDesc>Comprehensive</CoverageDesc>\n            <Deductible>\n              <FormatInteger>100</FormatInteger>\n            </Deductible>\n          </Coverage>\n          <Coverage>\n            <CoverageCd>COLL</CoverageCd>\n            <CoverageDesc>Collision</CoverageDesc>\n            <Deductible>\n              <FormatInteger>250</FormatInteger>\n            </Deductible>\n          </Coverage>\n          <Coverage>\n            <CoverageCd>TL</CoverageCd>\n            <Limit>\n              <FormatInteger>25</FormatInteger>\n              <LimitAppliesToCd>PerOcc</LimitAppliesToCd>\n            </Limit>\n          </Coverage>\n          <Coverage>\n            <CoverageCd>RREIM</CoverageCd>\n            <Limit>\n              <FormatInteger>15</FormatInteger>\n            </Limit>\n          </Coverage>\n        </PersVeh>\n        <PersVeh id=\"veh_2\" LocationRef=\"gar_2\">\n          <Manufacturer>CHEV</Manufacturer>\n          <Model>TAHOE LS/LT/Z71</Model>\n          <ModelYear>2004</ModelYear>\n          <VehBodyTypeCd>4D</VehBodyTypeCd>\n          <LeasedVehInd>1</LeasedVehInd>\n          <TerritoryCd />\n          <VehIdentificationNumber>3GN0K13V04</VehIdentificationNumber>\n          <VehSymbolCd>14</VehSymbolCd>\n          <NonOwnedVehInd>0</NonOwnedVehInd>\n          <VehUseCd>1A</VehUseCd>\n          <AirBagTypeCd>FrontBoth</AirBagTypeCd>\n          <Coverage>\n            <CoverageCd>BI</CoverageCd>\n            <CoverageDesc>Bodily Injury</CoverageDesc>\n            <Limit>\n              <FormatInteger>100000</FormatInteger>\n              <LimitAppliesToCd>PerPers</LimitAppliesToCd>\n            </Limit>\n            <Limit>\n              <FormatInteger>300000</FormatInteger>\n              <LimitAppliesToCd>PerAcc</LimitAppliesToCd>\n            </Limit>\n          </Coverage>\n          <Coverage>\n            <CoverageCd>PD</CoverageCd>\n            <CoverageDesc>Property Damage</CoverageDesc>\n            <Limit>\n              <FormatInteger>50000</FormatInteger>\n              <LimitAppliesToCd>PerAcc</LimitAppliesToCd>\n            </Limit>\n          </Coverage>\n          <Coverage>\n            <CoverageCd>MEDPM</CoverageCd>\n            <CoverageDesc>Medical</CoverageDesc>\n            <Limit>\n              <FormatInteger>500</FormatInteger>\n              <LimitAppliesToCd>PerPers</LimitAppliesToCd>\n            </Limit>\n          </Coverage>\n          <Coverage>\n            <CoverageCd>UMUIM</CoverageCd>\n            <CoverageDesc>Uninsured Underinsured Motorist-BI</CoverageDesc>\n            <Limit>\n              <FormatInteger>100000</FormatInteger>\n              <LimitAppliesToCd>PerPers</LimitAppliesToCd>\n            </Limit>\n            <Limit>\n              <FormatInteger>300000</FormatInteger>\n              <LimitAppliesToCd>PerAcc</LimitAppliesToCd>\n            </Limit>\n          </Coverage>\n          <Coverage>\n            <CoverageCd>UMPD</CoverageCd>\n            <CoverageDesc>Uninsured Motorist-PD</CoverageDesc>\n            <Limit>\n              <FormatInteger>50000</FormatInteger>\n              <LimitAppliesToCd>PerAcc</LimitAppliesToCd>\n            </Limit>\n          </Coverage>\n          <Coverage>\n            <CoverageCd>COMP</CoverageCd>\n            <CoverageDesc>Comprehensive</CoverageDesc>\n            <Deductible>\n              <FormatInteger>250</FormatInteger>\n            </Deductible>\n          </Coverage>\n          <Coverage>\n            <CoverageCd>COLL</CoverageCd>\n            <CoverageDesc>Collision</CoverageDesc>\n            <Deductible>\n              <FormatInteger>250</FormatInteger>\n            </Deductible>\n          </Coverage>\n          <Coverage>\n            <CoverageCd>TL</CoverageCd>\n            <Limit>\n              <FormatInteger>50</FormatInteger>\n              <LimitAppliesToCd>PerOcc</LimitAppliesToCd>\n            </Limit>\n          </Coverage>\n          <Coverage>\n            <CoverageCd>RREIM</CoverageCd>\n            <Limit>\n              <FormatInteger>30</FormatInteger>\n            </Limit>\n          </Coverage>\n        </PersVeh>\n        <PersVeh id=\"veh_3\" LocationRef=\"gar_3\">\n          <Manufacturer>FORD</Manufacturer>\n          <Model>BRONCO</Model>\n          <ModelYear>1995</ModelYear>\n          <VehBodyTypeCd>X4</VehBodyTypeCd>\n          <LeasedVehInd>1</LeasedVehInd>\n          <TerritoryCd />\n          <VehIdentificationNumber>1FM0U15H0S</VehIdentificationNumber>\n          <VehSymbolCd>13</VehSymbolCd>\n          <NonOwnedVehInd>0</NonOwnedVehInd>\n          <VehUseCd>1A</VehUseCd>\n          <AirBagTypeCd>Driver</AirBagTypeCd>\n          <Coverage>\n            <CoverageCd>BI</CoverageCd>\n            <CoverageDesc>Bodily Injury</CoverageDesc>\n            <Limit>\n              <FormatInteger>100000</FormatInteger>\n              <LimitAppliesToCd>PerPers</LimitAppliesToCd>\n            </Limit>\n            <Limit>\n              <FormatInteger>300000</FormatInteger>\n              <LimitAppliesToCd>PerAcc</LimitAppliesToCd>\n            </Limit>\n          </Coverage>\n          <Coverage>\n            <CoverageCd>PD</CoverageCd>\n            <CoverageDesc>Property Damage</CoverageDesc>\n            <Limit>\n              <FormatInteger>50000</FormatInteger>\n              <LimitAppliesToCd>PerAcc</LimitAppliesToCd>\n            </Limit>\n          </Coverage>\n          <Coverage>\n            <CoverageCd>MEDPM</CoverageCd>\n            <CoverageDesc>Medical</CoverageDesc>\n            <Limit>\n              <FormatInteger>500</FormatInteger>\n              <LimitAppliesToCd>PerPers</LimitAppliesToCd>\n            </Limit>\n          </Coverage>\n          <Coverage>\n            <CoverageCd>UMUIM</CoverageCd>\n            <CoverageDesc>Uninsured Underinsured Motorist-BI</CoverageDesc>\n            <Limit>\n              <FormatInteger>100000</FormatInteger>\n              <LimitAppliesToCd>PerPers</LimitAppliesToCd>\n            </Limit>\n            <Limit>\n              <FormatInteger>300000</FormatInteger>\n              <LimitAppliesToCd>PerAcc</LimitAppliesToCd>\n            </Limit>\n          </Coverage>\n          <Coverage>\n            <CoverageCd>UMPD</CoverageCd>\n            <CoverageDesc>Uninsured Motorist-PD</CoverageDesc>\n            <Limit>\n              <FormatInteger>50000</FormatInteger>\n              <LimitAppliesToCd>PerAcc</LimitAppliesToCd>\n            </Limit>\n          </Coverage>\n        </PersVeh>\n      </PersAutoLineBusiness>\n      <Location id=\"gar_1\">\n        <ItemIdInfo />\n        <Addr>\n          <AddrTypeCd>StreetAddress</AddrTypeCd>\n          <Addr1>2552 Forrest Drive</Addr1>\n          <City>Kinston</City>\n          <StateProvCd>NC</StateProvCd>\n          <PostalCode>28504</PostalCode>\n          <County>Lenoir</County>\n        </Addr>\n      </Location>\n      <Location id=\"gar_2\">\n        <ItemIdInfo />\n        <Addr>\n          <AddrTypeCd>StreetAddress</AddrTypeCd>\n          <Addr1>2552 Forrest Drive</Addr1>\n          <City>Kinston</City>\n          <StateProvCd>NC</StateProvCd>\n          <PostalCode>28504</PostalCode>\n          <County>Lenoir</County>\n        </Addr>\n      </Location>\n      <Location id=\"gar_3\">\n        <ItemIdInfo />\n        <Addr>\n          <AddrTypeCd>StreetAddress</AddrTypeCd>\n          <Addr1>2552 Forrest Drive</Addr1>\n          <City>Kinston</City>\n          <StateProvCd>NC</StateProvCd>\n          <PostalCode>28504</PostalCode>\n          <County>Lenoir</County>\n        </Addr>\n      </Location>\n    </PersAutoPolicyQuoteInqRq>\n  </InsuranceSvcRq>\n</ACORD> `; \n    return xml.trim(); \n  }\n}\n","export class DiscoveryInsuranceMap {\n\n  constructor() {\n    this.counter = 0;\n  }\n\n  mapDataToAcord(data) {\n    this.data = data;\n    let dt = new Date().toISOString();\n    let mos = Number(data.TermLength);\n    let d = new Date(data.TransactionRequestDt);\n    let year = d.getFullYear();\n    let month = d.getMonth();\n    let day = d.getDate();\n    // console.log(data.TermLength, mos, d, year, month, day);\n    let exp = new Date(year, month + mos, day).toISOString();\n    this.data.TransactionExpirationDt = exp.substring(0, exp.indexOf('T'));\n    // this.req.TransactionRequestDt = dt;    \n    // this.req.TransactionEffectiveDt = dt.slice(0, 10);    \n    this.data.RqUID = `$ {\n            dt.slice(0, 10).replace(/\\\\-/g, '')\n        }\n        -$ {\n            this.counter++\n        }\n        `;\n    let driver = data.drivers[0];\n    let json = `{\n      \"SignonRq\": {\n        \"SignonPswd\": {\n          \"SignonRoleCd\":\"Agent\",\n          \"CustId\": {\n            \"SPName\": \"jenesis.com\", \"CustPermId\": \"JEN\", \"CustLoginId\": \"432\"\n          },\n          \"CustPswd\": {\n            \"EncryptionTypeCd\": \"NONE\", \"Pswd\": \"Testwithme\"\n          }\n        },\n        \"ClientDt\":\"${data.TransactionRequestDt}\",\n        \"CustLangPref\":\"en-US\",\n        \"Producer\": {\n          \"ProducerInfo\": {\n            \"ContractNumber\": \"432\", \"ProducerRoleCd\": \"Agency\"\n          }\n        },\n        \"ClientApp\": {\n          \"Org\": \"Pegram Insurance\", \"Name\": \"QuoteOne\", \"Version\": \"1.0\"\n        }\n      },\n      \"InsuranceSvcRq\": {\n        \"RqUID\":\"${data.RqUID}\",\n        \"PersAutoPolicyQuoteIndRq\": {\n          \"RqUID\":\"${data.RqUID}\",\n          \"TransactionRequestDt\":\"${data.TransactionRequestDt}\",\n          \"TransactionEffectiveDt\":\"${data.TransactionEffectiveDt}\",\n          \"CurCd\":\"USD\",\n          \"InsuredOrPrincipal\": {\n            \"GeneralPartyInfo\": {\n              \"NameInfo\": {\n                \"PersonName\": {\n                  \"Surname\":\"${data.InsuredLastName1}\",\n                  \"GivenName\":\"${data.InsuredFirstName1}\"\n                },\n                \"TaxIdentity\": {\n                  \"TaxIdTypeCd\": \"\", \"TaxId\": \"\"\n                }\n              },\n              \"Addr\": {\n                \"AddrTypeCd\":\"StreetAddress\",\n                \"Addr1\":\"${data.Addr1}\",\n                \"City\":\"${data.City}\",\n                \"StateProvCd\":\"${data.StateProvCd}\",\n                \"PostalCode\":\"${data.PostalCode}\",\n                \"County\":\"${data.County}\"\n              },\n              \"Communications\": {\n                \"PhoneInfo\":[ \n                  {\n                    \"PhoneTypeCd\":\"Phone\",\n                    \"CommunicationUseCd\":\"Home\",\n                    \"PhoneNumber\":\"${data.PhoneNumber1}\"\n                  },\n                  {\n                    \"PhoneTypeCd\": \"Cell\", \n                    \"CommunicationUseCd\": \"\", \n                    \"PhoneNumber\": \"\"\n                  }\n                ],\n                \"EmailInfo\": {\n                  \"CommunicationUseCd\": \"\", \n                  \"EmailAddr\": \"\"\n                }\n              }\n            },\n            \"InsuredOrPrincipalInfo\": {\n              \"InsuredOrPrincipalRoleCd\":\"Insured\",\n              \"PersonInfo\": {\n                \"GenderCd\":\"${driver.GenderCd}\",\n                \"BirthDt\":\"${driver.BirthDt}\",\n                \"MaritalStatusCd\":\"${driver.MaritalStatusCd}\"\n              },\n              \"PrincipalInfo\": {\n                \"QuestionAnswer\": {\n                  \"QuestionCd\": \"Credit\", \n                  \"YesNoCd\": \"NO\"\n                }\n              }\n            }\n          },\n          \"PersPolicy\": {\n            \"LOBCd\":\"AUTO\",\n            \"ContractTerm\": {\n              \"EffectiveDt\":\"${data.TransactionEffectiveDt}\",\n              \"ExpirationDt\":\"${data.TransactionExpirationDt}\",\n              \"DurationPeriod\": {\n                \"NumUnits\":\"${data.TermLength}\",\n                \"UnitMeasurementCd\": \"MON\"\n              }\n            },\n            \"QuoteInfo\": {\n              \"CompanysQuoteNumber\": \"541\"\n            },\n            \"PersApplicationInfo\": {\n              \"InsuredOrPrincipal\":\"\",\n              \"ResidenceOwnedRentedCd\":\"${data.HomeOwnerType}\"\n            },\n            \"DriverVeh\":[ \n              ${this.getDriverVeh()}\n            ]\n          },\n          \"PersAutoLineBusiness\": {\n            \"LOBCd\":\"AUTO\",\n            \"PersDriver\":[ \n              ${this.getPersDriver()}\n            ],\n            \"PersVeh\":[ \n              ${this.getPersVeh()}\n            ]\n          },\n          \"Location\":[ \n            ${this.getLocation()}\n          ]\n        }\n      }\n    }`.trim();\n    let result = null;\n    try {\n      result = JSON.parse(json);\n    }\n    catch (e) {\n      console.log('Error mapping to Acord format.', e);\n    }\n    return json;\n  }\n  getDriverVeh() {\n    let json = '';\n    this.data.drivers.forEach((item, index) => {\n      json += ` {\n        \"OwnedVehInd\":\"${index + 1}\", \n        \"_VehRef\":\"veh_${index + 1}\", \n        \"_DriverRef\":\"drv_${index + 1}\"\n      }, `.trim();\n    });\n    json = json.substring(0, json.length - 1);\n    return json;\n  }\n  getPersDriver() {\n    let json = '';\n    this.data.drivers.forEach((item, index) => {\n      json += ` {\n        \"GeneralPartyInfo\": {\n          \"NameInfo\": {\n            \"PersonName\": {\n              \"Surname\":\"${item.LastName}\", \n              \"GivenName\":\"${item.FirstName}\"\n            }, \n            \"TaxIdentity\": {\n              \"TaxIdTypeCd\": \"\", \n              \"TaxId\": \"\"\n            }\n          }, \n          \"Addr\": {\n            \"AddrTypeCd\":\"StreetAddress\", \n            \"Addr1\":\"${this.data.Addr1}\", \n            \"City\":\"${this.data.City}\", \n            \"StateProvCd\":\"${this.data.StateProvCd}\", \n            \"PostalCode\":\"${this.data.PostalCode}\", \n            \"County\":\"${this.data.County}\"\n          }, \n          \"Communications\": {\n            \"PhoneInfo\":[ \n              {\n                \"PhoneTypeCd\":\"Phone\", \n                \"CommunicationUseCd\":\"Home\", \n                \"PhoneNumber\":\"${this.data.PhoneNumber1}\"\n              }, \n              {\n                \"PhoneTypeCd\":\"Cell\", \n                \"CommunicationUseCd\":\"Home\", \n                \"PhoneNumber\":\"${this.data.PhoneNumber2 || ''}\"\n              }\n            ], \n            \"EmailInfo\": {\n              \"CommunicationUseCd\": \"\", \n              \"EmailAddr\": \"\"\n            }\n          }\n        }, \n        \"DriverInfo\": {\n          \"PersonInfo\": {\n            \"GenderCd\":\"${item.GenderCd}\", \n            \"BirthDt\":\"${item.BirthDt}\", \n            \"MaritalStatusCd\":\"${item.MaritalStatusCd}\"\n          }, \n          \"License\": {\n            \"LicenseTypeCd\":\"Driver\", \n            \"LicenseStatusCd\":\"${item.LicenseStatus}\", \n            \"LicenseDt\":\"${item.LicenseDt}\", \n            \"YearsExperience\":\"${item.YearsExperience}\", \n            \"LicensePermitNumber\":\"${item.LicensePermitNumber}\", \n            \"StateProvCd\":\"${item.StateProvCd}\"\n          }\n        }, \n        \"PersDriverInfo\": {\n          \"DriverRelationshipToApplicantCd\":\"${item.DriverRelationshipToApplicantCd}\", \n          \"DriverPoints\": \"0\", \n          \"DriverTypeCd\": \"P\", \n          \"GoodStudentCd\": \"N\"\n        }, \n        \"_id\":\"drv_${index + 1}\"\n      }, `.trim();\n    });\n    json = json.substring(0, json.length - 1);\n    return json;\n  }\n  getPersVeh() {\n    let json = '';\n    let bi = this.data.BIType.split('/');\n    let biPerPers = bi[0].replace(',', '');\n    let biPerAcc = bi[1].replace(',', '');\n    let pdType = this.data.PDType.replace(',', '');\n    let medType = this.data.MedType.replace(',', '');\n    let unbi = this.data.UnBIType.split('/');\n    let unbiPerPers = unbi[0].replace(',', '');\n    let unbiPerAcc = unbi[1].replace(',', '');\n    let unpdType = this.data.UnPDType.replace(',', '');\n    this.data.vehicles.forEach((item, index) => {\n      let coll = item.Coll.replace(',', '');\n      let comp = item.Comp.replace(',', '');\n      console.log('comp:coll', comp, coll);\n      json += ` {\n        \"Manufacturer\":\"${item.Manufacturer}\", \n        \"Model\":\"${item.Model}\", \n        \"ModelYear\":\"${item.ModelYear}\", \n        \"VehBodyTypeCd\":\"${item.VehDescription}\", \n        \"LeasedVehInd\":\"1\", \n        \"TerritoryCd\":\"\", \n        \"VehIdentificationNumber\":\"${item.VehIdentificationNumber}\", \n        \"VehSymbolCd\":\"${item.VehSymCd || 0}\", \n        \"NonOwnedVehInd\":\"0\", \n        \"VehUseCd\":\"${item.VehUseCd}\", \n        \"AirBagTypeCd\":\"${item.AirBagType}\", \n        \"Coverage\":[ \n          {\n            \"CoverageCd\":\"BI\", \n            \"CoverageDesc\":\"Bodily Injury\", \n            \"Limit\":[ \n              {\n                \"FormatInteger\":\"${biPerPers}\", \n                \"LimitAppliesToCd\": \"PerPers\"\n              }, \n              {\n                \"FormatInteger\":\"${biPerAcc}\", \n                \"LimitAppliesToCd\": \"PerAcc\"\n              }\n            ]\n          }, \n          {\n            \"CoverageCd\":\"PD\", \n            \"CoverageDesc\":\"Property Damage\", \n            \"Limit\":[ \n              {\n                \"FormatInteger\":\"${pdType}\", \n                \"LimitAppliesToCd\": \"PerAcc\"\n              }\n            ]\n          }, \n          {\n            \"CoverageCd\":\"MEDPM\", \n            \"CoverageDesc\":\"Medical Payments\", \n            \"Limit\":[ \n              {\n                \"FormatInteger\":\"${medType}\", \n                \"LimitAppliesToCd\": \"PerPers\"\n              }\n            ]\n          }, \n          {\n            \"CoverageCd\":\"UMUIM\", \n            \"CoverageDesc\":\"Uninsured Underinsured Motorist-BI\", \n            \"Limit\":[ \n              {\n                \"FormatInteger\":\"${unbiPerPers}\", \n                \"LimitAppliesToCd\": \"PerPers\"\n              }, \n              {\n                \"FormatInteger\":\"${unbiPerAcc}\", \n                \"LimitAppliesToCd\": \"PerAcc\"\n              }\n            ]\n          }, \n          {\n            \"CoverageCd\":\"UMPD\", \n            \"CoverageDesc\":\"Uninsured Motorist-PD\", \n            \"Limit\":[ \n              {\n                \"FormatInteger\":\"${unpdType}\", \n                \"LimitAppliesToCd\": \"PerAcc\"\n              }\n            ]\n          }, \n          {\n            \"CoverageCd\":\"COMP\", \n            \"CoverageDesc\":\"Comprehensive\", \n            \"Deductible\": {\n              \"FormatInteger\":\"${comp}\"\n            }\n          }, \n          {\n            \"CoverageCd\":\"COLL\", \n            \"CoverageDesc\":\"Collision\", \n            \"Deductible\": {\n              \"FormatInteger\":\"${coll}\"\n            }\n          },\n          {\n            \"CoverageCd\":\"TL\", \n            \"Limit\":[ \n              {\n                \"FormatInteger\": \"25\", \n                \"LimitAppliesToCd\": \"PerOcc\"\n              }\n            ]\n          }, \n          {\n            \"CoverageCd\":\"RREIM\", \"Limit\":[ \n              {\n                \"FormatInteger\":\"${item.RentalType}\"\n              }\n            ]\n          }\n        ], \n        \"_id\":\"veh_${index + 1}\", \n        \"_LocationRef\":\"gar_${index + 1}\"\n      }, `.trim();\n    });\n    json = json.substring(0, json.length - 1);\n    return json;\n  }\n  getLocation() {\n    let json = '';\n    this.data.vehicles.forEach((item, index) => {\n      json += ` {\n        \"ItemIdInfo\":\"\", \"Addr\": {\n          \"AddrTypeCd\":\"StreetAddress\", \n          \"Addr1\":\"${this.data.Addr1}\", \n          \"City\":\"${this.data.City}\", \n          \"StateProvCd\":\"${this.data.StateProvCd}\", \n          \"PostalCode\":\"${this.data.PostalCode}\", \n          \"County\":\"${this.data.County}\"\n        }\n        , \"_id\":\"gar_${index + 1}\"\n      }, `.trim();\n    });\n    json = json.substring(0, json.length - 1);\n    return json;\n  }\n}\n","import {HttpClient, json} from 'aurelia-fetch-client';\n\nexport class DataService {\n\n  //baseUrl = 'https://api.mlab.com/api/1/';\n  // url = 'databases/dc-designer/collections/';\n  url = 'databases/';\n  baseUrl = `https://api.mlab.com/api/1/${this.url}`;\n  apiKey = 'apiKey=GDOWW9TNkcG5xZC45XcKXm6gFIjdBWcE';\n\n  modal = {\n    metaSrc: '',\n    metaKey: '',\n    dataSrc: '',\n    dataKey: '',\n    title: '',\n  };\n\n  constructor() {\n    this.http = new HttpClient();\n    this.http.configure(config => {\n      config\n        .withBaseUrl(this.baseUrl)\n        .withDefaults({\n          headers: {\n            'Accept': 'application/json',\n            'X-Requested-With': 'Fetch'\n          }\n        })\n        .withInterceptor({\n          request(request) {\n            // console.log(`Requesting ${request.method} ${request.url}`);\n            return request; // you can return a modified Request, or you can short-circuit the request              \n          },\n          response(response) {\n            // console.log(`  Received ${response.status} ${response.url}`);\n            return response; // you can return a modified Response\n          }\n        });\n    });\n  }\n \n  queryByExample(values) {\n    return function(item) {\n      let keys = Object.keys( values );\n      let answer = true;\n\n      for( var i = 0, len = keys.length; i < len; i++) {\n        if( item[keys[i]] !== values[keys[i]] ) {\n          answer = false;\n          break;\n        }\n      }\n      return answer;\n    }\n  }\n  /**\n   *  This method takes in a database, collection, and id\n   *  and tries to see if a cache exists. Otherwise, it \n   *  performs a fetch from the database to see if an object\n   *  exists. Finally, it adds the result to the cache for\n   *  any subsequent calls.\n   */\n  findById(database, collection, id) {\n    // console.log('findById', id);\n    // /databases/{database}/collections/{collection}/{_id}\n    return this.http.fetch(`${database}/collections/${collection}/${id}?${this.apiKey}`)\n      .then(response => response.json())\n      .then(data => {\n        // console.log(data);\n        return data;\n      });\n  }\n  /**\n   *\n   */\n  findOne(database, collection, filter) {\n    let query = '?fo=true&';\n    if (filter) {\n      query = `?q=${JSON.stringify(filter)}&fo=true&`;\n      // console.log('filter', query);\n    }\n    console.log('data-service:findOne query', query);\n    return this.http.fetch(`${database}/collections/${collection}${query}${this.apiKey}`)\n      .then(response => response.json())\n      .then(data => {\n        // console.log(data);\n        return data;\n      });\n  }\n  /**\n   *  This method takes in a database, collection, filter,\n   *  and orderBy and tries to see if a cache exists. \n   *  Otherwise, it performs a fetch from the database to \n   *  see if an object exists. Finally, it adds the result\n   *  to the cache for any subsequent calls.\n   */\n  findAll(database, collection, filter, orderBy) {\n    let query = '?';\n    let sort = '';\n    if (filter) {\n      query = `?q=${JSON.stringify(filter)}&`;\n      console.log('filter', query);\n    }\n    if (orderBy) {\n      sort = `s=${JSON.stringify(orderBy)}&`;\n    }\n    return this.http.fetch(`${database}/collections/${collection}${query}${sort}${this.apiKey}`)\n      .then(response => response.json())\n      .then(data => {\n        // console.log(collection, data);\n        return data;\n      });\n  }\n  /**\n   *  This method takes in a database, collection, and data and\n   *  tries to insert the data into the database. It then adds\n   *  the returned object to the cache.\n   */\n  insert(database, collection, data) {\n    return this.http.fetch(`${database}/collections/${collection}?${this.apiKey}`, {\n        method: 'post',\n        body: json(data)\n      })\n      .then(response => response.json())\n      .then(data => {\n        // console.log(data);\n        return data;\n      });    \n  }\n  /**\n   *  This method takes in a database, collectin, filter, and\n   *  data and tries to update the data in the database. It then\n   *  updates the object in the cache.\n   */\n  update(database, collection, filter, data) {\n    let query = '?';\n    if (filter) {\n      query = `?q=${JSON.stringify(filter)}&`;\n      // console.log('filter', query);\n    }\n    return this.http.fetch(`${database}/collections/${collection}${query}${this.apiKey}`, {\n        method: 'put',\n        body: json(data)\n      })\n      .then(response => response.json())\n      .then(upd => {\n        // console.log(data);\n        return upd;\n      });    \n  }\n  /**\n   *  This method takes in a database, collection, and id and tries\n   *  to delete the object from the database. It then tries to \n   *  delete the same object from the cache.\n   */\n  deleteOne(database, collection, id) {\n    return this.http.fetch(`${database}/collections/${collection}/${id}?${this.apiKey}`, {\n        method: 'delete'\n      })\n      .then(response => response.json())\n      .then(data => {\n        // console.log(data);\n        return data;\n      });    \n  }\n  /**\n   *  This method takes in a database, collection, and filter and\n   *  tries to delete the object(s) from the database. It then tries \n   *  to delete the same object(s) from the cache.\n   */\n  deleteAll(database, collection, filter) {\n    let query = '?';\n    if (filter) {\n      query = `?q=${JSON.stringify(filter)}&`;\n      // console.log('filter', query);\n    }    \n    return this.http.fetch(`${database}/collections/${collection}${query}${this.apiKey}`, {\n        method: 'put',\n        body: json([])\n      })\n      .then(response => response.json())\n      .then(data => {\n        // console.log(data);\n        return data;\n      });    \n  }\n  /**\n   *  This method takes in a database, collection, and data and \n   *  tries to either update or insert the data in the database\n   *  by calling the appropriate helper method. \n   */\n  save(database, collection, data) {\n    if (data._id && data._id.$oid) {\n      let filter = { _id: data._id };\n      return this.update(database, collection, filter, data);\n    } else {\n      delete data._id;\n      return this.insert(database, collection, data);\n    }\n  }\n\n}","export class Rule {\n\n  constructor(options) {\n    this.base_behavior = options.base_behavior;\n    this.action = options.action;\n    this.subject = options.subject;\n    this.conditions = options.conditions;\n    this.initialize();\n  }\n\n  initialize() {\n    if (!this.actions && this.action) {\n      this.actions = _.flatten([this.action]);\n    }\n    if (!this.subjects && this.subject) {\n      this.subjects = _.flatten([this.subject]);\n    }\n    if (!this.conditions) {\n      this.conditions = {};\n    }\n  }\n  is_relevant(action, subject) {\n    return this.matches_action(action) && this.matches_subject(subject);\n  }\n  matches_conditions(action, subject) {\n    if (_.isObject(this.conditions) && !_.isEmpty(this.conditions) && !this.subject_class(subject)) {\n    // if (_.isObject(this.conditions) && !_.isEmpty(this.conditions)) {\n      return this.matches_conditions_hash(subject);\n    }\n    else {\n      return _.isEmpty(this.conditions) ? true : this.base_behavior;\n    }\n  }\n  subject_class(subject) {\n    return subject.hasOwnProperty(\"__name\");\n  }\n  matches_action(action) {\n    return _.includes(this.expanded_actions, \"manage\") || _.includes(this.expanded_actions, action);\n  }\n  matches_subject(subject) {\n    return _.includes(this.subjects, \"all\") || _.includes(this.subjects, subject) || this.matches_subject_class(subject);\n    // return _.includes(this.subjects, \"all\") || _.includes(this.subjects, subject);\n  }\n  matches_subject_class(subject) {\n    return _.some(this.subjects, function(sub) {\n      if (subject.hasOwnProperty(\"__name\")) {\n        return subject.__name === sub;\n      }\n      else {\n        return false;       \n      }\n    });\n  }\n  matches_conditions_hash(subject, conditions) {\n    if (!conditions) conditions = this.conditions;\n\n    if (_.isEmpty(conditions)) {\n      return true;\n    }\n    else {\n      return _.all(conditions, function(value, name) {\n        let attribute = subject[name];\n        if (_.isUndefined(attribute)) {\n          attribute = subject.get(name);\n        }\n        if (_.isObject(value) && !_.isArray(value)) {\n          if (_.isArray(attribute)) {\n            return _.some(attribute, function(element) {\n              this.matches_conditions_hash(element, value);\n            }, this);\n          }\n          else {\n            return attribute && this.matches_conditions_hash(attribute, value);\n          }\n        }\n        else if (_.isArray(value)) {\n          return _.includes(value, attribute) || _.isEqual(value, attribute);\n        }\n        else {\n          return attribute == value;\n        }\n      }, this);\n    }\n  }\n}","import {Aurelia} from 'aurelia-framework';\nimport {Redirect} from 'aurelia-router';\nimport {Ability} from './ability';\nimport {UserService} from '../services/user-service';\n\nexport class CanCanStep {\n  static inject = [Aurelia, UserService];\n\n  constructor(aurelia, userService) {\n    this.aurelia = aurelia;\n    this.userService = userService;\n\n    let ability = new Ability(this.userService.user);\n    this.userService.user.ability = ability;    \n  }\n\n  run(navigationInstruction, next) {\n    return this.can(this.userService.user, navigationInstruction, next);\n  }\n\n  can(user, navigationInstruction, next) {\n    let canAccess = navigationInstruction.getAllInstructions().every(i => {\n      return user.ability.can(\"view\", i.config.moduleId);\n    });\n    if (canAccess) {\n      console.log(\"Permissions granted for the route: '\"+ navigationInstruction.config.moduleId + \"'\");\n      return next();\n    }\n    else {\n      console.log(\"You have no permissions for the route: '\"+ navigationInstruction.config.moduleId + \"'\");\n      // console.log(\"Redirecting to the route: 'access-denied'\");\n      return next.cancel(new Redirect('/access-denied'));\n    }\n  }\n\n}\n","import {SessionService} from '../services/session-service';\n\nexport class AuthorizeStep {\n  static inject = [SessionService];\n\n  constructor(sessionSvc) {\n    this.sessionSvc = sessionSvc;\n  }\n\n  run(navigationInstruction, next) {\n    const instructions = navigationInstruction.getAllInstructions();\n    if (navigationInstruction.getAllInstructions().some(i => i.config.settings.roles.indexOf('authorized') !== -1)) {\n      if (this.sessionSvc.isAuthenticated()) {\n        const message = `Authorized for route ${navigationInstruction.fragment}`;\n        console.debug(message);\n        return next();\n      } else {\n        this.sessionSvc.login();\n      }\n    }\n\n    return next();\n  }\n}\n","import {Rule} from './rule';\n\nexport class Ability {\n\n  constructor(user) {\n    this.user = user;\n    this.initialize(user);\n  }\n\n  defaults() {\n    return {\n      rules: [],\n      aliased_actions: {\n        read: [\"index\", \"show\"],\n        create: [\"new\"],\n        update: [\"edit\"]\n      }\n    };\n  }\n  initialize(user) {\n    if (!_.isEmpty(user.rules)) {\n      this.rules = _.map(user.rules, function(rule) {\n        return new Rule(rule);\n      });\n    }\n    else {\n      this.rules = [];\n    }\n\n    this.aliased_actions = {\n      read: [\"index\", \"show\"],\n      create: [\"new\"],\n      update: [\"edit\"]\n    };\n\n  }\n  can(action, subject, conditions) {\n    let match = _.find(this.relevant_rules(action, subject), function(rule) {\n      return rule.matches_conditions(action, subject);\n    }, this);\n    return match ? match.base_behavior : false;\n  }\n  cannot(action, subject) {\n    return !this.can(action, subject);\n  }\n  set_can(action, subject, conditions) {\n    this.rules.push(new Rule({base_behavior:true, action:action, subject:subject, conditions:conditions}));\n  }\n  set_cannot(action, subject, conditions) {\n    this.rules.push(new Rule({base_behavior:false, action:action, subject:subject, conditions:conditions}));\n  }\n  alias_action(from, target) {\n    this.validate_target(target);\n    if(!_.isArray(this.aliased_actions[target])) this.aliased_actions[target] = [];\n    this.aliased_actions[target] = this.aliased_actions[target].concat(from);\n  }\n  validate_target(target) {\n    if (_.chain(this.aliased_actions).values().flatten().include(target).value()) {\n      throw new Error(\"You can't specify target (\" + target + \") as alias because it is the real action name.\");\n    }\n  }\n  clear_aliased_actions() {\n    this.aliased_actions = {};\n  }\n  expand_actions(actions) {\n    return _.chain(actions).map((action) => {\n      if (this.aliased_actions[action]) {\n        return [action].concat(this.expand_actions(this.aliased_actions[action]));\n      }\n      else {\n        return action;\n      }\n    }, this).flatten().value();\n  }\n  relevant_rules(action, subject) {\n    let reversed_rules = this.rules.slice(0);\n    return _.filter(reversed_rules.reverse(), (rule) => {\n      rule.expanded_actions = this.expand_actions(rule.actions);\n      return rule.is_relevant(action, subject);\n    }, this);\n  }\n}\n","export function configure(config) {\n  config.globalResources([\n    './attributes/input-mask/input-mask',\n    './attributes/set-focus/set-focus',\n    './elements/address-info/address-info',\n    './elements/contact-info/contact-info',\n    './elements/data-pager/data-pager',\n    './elements/driver-info/driver-info',\n    './elements/gravatar/gravatar',\n    './elements/notifier/notifier',\n    './elements/personal-info/personal-info',\n    './elements/quote-info/quote-info',\n    './elements/user-settings/user-settings',\n    './elements/vehicle-info/vehicle-info',\n  ]);\n}\n","import {customElement, bindable, children} from 'aurelia-framework';\nimport {DialogService} from 'aurelia-dialog';\nimport {SessionService} from '../../../services/session-service';\nimport {LookupDialog} from '../../../dialogs/lookup-dialog';\n\n@customElement('vehicle-info')\nexport class VehicleInfo {\n  static inject = [DialogService, SessionService];\n\n  @bindable currentItem;\n  @bindable lookups;\n  @bindable isReadonly = false;\n\n  constructor(dialogSvc, sessionSvc) {\n    this.dialogSvc = dialogSvc;\n    this.sessionSvc = sessionSvc;\n  }\n  getLookup(name) {\n    let lookup = this.lookups.find(l=> l.name===name);\n    return lookup;\n  }\n  getLookupItems(name) {\n    if (!this.lookups) return [];\n    let lookup = this.lookups.find(l => l.name === name);\n    if (lookup && lookup.fields) return lookup.fields;\n    return [];\n  }\n  disabled(value, ...args) {\n    return !args.includes(value);\n  }  \n  async selectChange(e, key, title) {\n    if (e.key === 'F3' && this.sessionSvc.user.roles.includes('admin')) {\n      let model = {\n        data: {\n          database: 'quote-one', \n          collection: 'lookups', \n          header: title, \n          lookupName: key, \n          currentLookup: this.getLookup(key)\n        }\n      };\n      const options = {viewModel: LookupDialog, model}\n      const closeResult = await this.dialogSvc.open(options).then(result => result.closeResult);\n    } else {\n      return true;\n    }\n  }\n  \n}\n    ","import {DialogService} from 'aurelia-dialog';\nimport {SessionService} from '../../../services/session-service';\nimport {UserSettingsDialog} from '../../../dialogs/user-settings-dialog';\n\nexport class UserSettings {\n  static inject = [DialogService, SessionService];\n\n  constructor(dialogSvc, sessionSvc) {\n    this.dialogSvc = dialogSvc;\n    this.sessionSvc = sessionSvc;\n  }\n\n  showUserSettings(e) {\n    let model = {};\n    this.dialogSvc.open({\n      viewModel: UserSettingsDialog, model: model, lock: false\n    });\n  }\n}\n","import {customElement, bindable, children} from 'aurelia-framework';\nimport {DialogService} from 'aurelia-dialog';\nimport {SessionService} from '../../../services/session-service';\nimport {LookupDialog} from '../../../dialogs/lookup-dialog';\n\n@customElement('quote-info')\nexport class QuoteInfo {\n  static inject = [DialogService, SessionService];\n\n  @bindable currentItem;\n  @bindable lookups;\n\n  constructor(dialogSvc, sessionSvc) {\n    this.dialogSvc = dialogSvc;\n    this.sessionSvc = sessionSvc;\n  }\n  getLookup(name) {\n    let lookup = this.lookups.find(l=> l.name===name);\n    return lookup;\n  }\n  getLookupItems(name) {\n    if (!this.lookups) return [];\n    let lookup = this.lookups.find(l => l.name === name);\n    if (lookup && lookup.fields) return lookup.fields;\n    return [];\n  }\n  async selectChange(e, key, title) {\n    if (e.key === 'F3' && this.sessionSvc.user.roles.includes('admin')) {\n      let model = {\n        data: {\n          database: 'quote-one', \n          collection: 'lookups', \n          header: title, \n          lookupName: key, \n          currentLookup: this.getLookup(key)\n        }\n      };\n      const options = {viewModel: LookupDialog, model}\n      const closeResult = await this.dialogSvc.open(options).then(result => result.closeResult);\n    } else {\n      return true;\n    }\n  }\n  \n}\n    ","import {customElement, bindable, children, bindingMode} from 'aurelia-framework';\nimport {BindingSignaler} from 'aurelia-templating-resources';\nimport {DialogService} from 'aurelia-dialog';\nimport {SessionService} from '../../../services/session-service';\nimport {CustomerDialog} from '../../../dialogs/customer-dialog';\nimport {LookupDialog} from '../../../dialogs/lookup-dialog';\n\n@customElement('personal-info')\nexport class PersonalInfo {\n  static inject = [BindingSignaler, DialogService, SessionService];\n\n  @bindable({ defaultBindingMode: bindingMode.twoWay }) currentItem;\n  @bindable currentItem;\n  @bindable lookups;\n  @bindable showCustomerLookup = false;\n  @bindable saveCallback;\n  @bindable isReadonly = false;\n\n  constructor(signaler, dialogSvc, sessionSvc) {\n    this.signaler = signaler;\n    this.dialogSvc = dialogSvc;\n    this.sessionSvc = sessionSvc;\n  }\n  getLookup(name) {\n    let lookup = this.lookups.find(l=> l.name===name);\n    return lookup;\n  }\n  getLookupItems(name) {\n    if (!this.lookups) return [];\n    let lookup = this.lookups.find(l => l.name === name);\n    if (lookup && lookup.fields) return lookup.fields;\n    return [];\n  }\n  async selectChange(e, key, title) {\n    if (e.key === 'F3' && this.sessionSvc.user.roles.includes('admin')) {\n      let model = {\n        data: {\n          database: 'quote-one', \n          collection: 'lookups', \n          header: title, \n          lookupName: key, \n          currentLookup: this.getLookup(key)\n        }\n      };\n      const options = {viewModel: LookupDialog, model}\n      const closeResult = await this.dialogSvc.open(options).then(result => result.closeResult);\n    } else {\n      return true;\n    }\n  }\n  async launchCustomerDlg() {\n    let model = {\n      header: \"Customer\",\n      close: \"Close\", \n      lookups: this.lookups\n    };\n    const options = {viewModel: CustomerDialog, model}\n    const closeResult = await this.dialogSvc.open(options).then(result => result.closeResult);\n    if (closeResult.wasCancelled) return;\n    this.currentItem = closeResult.output;\n    this.currentItem.customerId = this.currentItem._id.$oid;\n    delete this.currentItem._id;\n    this.currentItem.household_members = [];\n    this.currentItem.household_vehicles = [];\n    this.signaler.signal('binding-signal');\n    setTimeout(() => {\n      if (this.saveCallback) {\n        this.saveCallback();\n      }\n    }, 250);\n  }\n  \n  \n}\n    ","import {Notification} from './notification';\n\nlet currentZIndex = 300000;\n\nfunction getNextZIndex() {\n  return ++currentZIndex;\n}\n\nexport class Notifier {\n  notifications = [];\n\n  constructor() {\n  }\n\n  add(notification){\n    notification.controller = this;\n    this.notifications.push(notification);\n\n    if(!notification.isModal && notification.timeout) {\n      // console.log('notification:timeout', notification.timeout);\n      setTimeout(() => {\n        this.remove(notification);\n      }, notification.timeout);\n    }\n  }\n\n  remove(notification) {\n    let i = this.notifications.indexOf(notification);\n    this.notifications.splice(i, 1);\n  }\n\n  growl(options) {\n    document.querySelector('.note-container').style.zIndex = getNextZIndex();\n\n    // if (options.showClose !== false) options.showClose = true;\n    let n = new Notification(options);\n    this.add(n);\n  }\n\n}\n","export class Notification {\n  static standardTimeout = 3000;\n\n  constructor(options) {\n    this.title = options.title || '';\n    this.message = options.message;\n    this.footer = options.footer || '';\n    this.type = options.type || 'success';\n    this.showClose = options.showClose || false;\n    this.isModal = options.isModal || false;\n    this.theme = options.theme || 'note-dark';\n    this.timeout = options.timeout || Notification.standardTimeout;\n    if (this.timeout < 0) this.timeout = 0;\n  }\n\n  close() {\n    this.controller.remove(this);\n  }\n\n  static info(message, title) {\n    return new Notification(message, title || 'Success', 'success');\n  }\n}\n","import {customElement, bindable} from 'aurelia-framework'\nimport {Md5Service} from '../../../services/md5-service';\n\n@customElement('gravatar')\nexport class Gravatar {\n  static inject = [Md5Service];\n\n  @bindable credential = '';\n  @bindable size = 64;\n  @bindable defaultImage = 'mm';\n  @bindable rating = 'g';\n  @bindable isSecure = true;\n  @bindable url = \"\";\n\n  constructor(md5Svc) {\n    this.md5Svc = md5Svc;\n  }\n\n  attached() {\n    this.refreshBindings();\n  }\n\n  propertyChanged() {\n    this.refreshBindings();\n  }\n\n  refreshBindings() {\n    this.url = this.generate();\n  }\n\n  generate() {\n    let hashedCredential = this.isEmail(this.credential) ? this.md5Svc.md5(this.credential) : this.credential;\n    let url = this.isSecure ? \"https://secure.gravatar.com/avatar/\" : \"http://www.gravatar.com/avatar/\";\n    url += `${hashedCredential}.jpg?`;\n\n    if (this.size) {\n      url += `s=${this.size}&`; \n    }\n    if (this.rating) { \n      url += `r=${this.rating}&`;\n    }\n    if (this.defaultImage) { \n      url += `d=${encodeURIComponent(this.defaultImage)}`;\n    }\n    return url;\n  }\n\n  isEmail(input = '') {\n    return input.indexOf(\"@\") >= 0;\n  }\n\n}\n","import {customElement, bindable, children} from 'aurelia-framework';\nimport {DialogService} from 'aurelia-dialog';\nimport {SessionService} from '../../../services/session-service';\nimport {LookupDialog} from '../../../dialogs/lookup-dialog';\n\n@customElement('driver-info')\nexport class DriverInfo {\n  static inject = [DialogService, SessionService];\n\n  @bindable currentItem;\n  @bindable lookups;\n  @bindable isReadonly = false;\n\n  constructor(dialogSvc, sessionSvc) {\n    this.dialogSvc = dialogSvc;\n    this.sessionSvc = sessionSvc;\n  }\n  getLookup(name) {\n    let lookup = this.lookups.find(l=> l.name===name);\n    return lookup;\n  }\n  getLookupItems(name) {\n    if (!this.lookups) return [];\n    let lookup = this.lookups.find(l => l.name === name);\n    if (lookup && lookup.fields) return lookup.fields;\n    return [];\n  }\n  disabled(value, ...args) {\n    return !args.includes(value);\n  }  \n  async selectChange(e, key, title) {\n    if (e.key === 'F3' && this.sessionSvc.user.roles.includes('admin')) {\n      let model = {\n        data: {\n          database: 'quote-one', \n          collection: 'lookups', \n          header: title, \n          lookupName: key, \n          currentLookup: this.getLookup(key)\n        }\n      };\n      const options = {viewModel: LookupDialog, model}\n      const closeResult = await this.dialogSvc.open(options).then(result => result.closeResult);\n    } else {\n      return true;\n    }\n  }\n  licenseDateChange(e, driver) {\n    let date = new Date(driver.license_date);\n    driver.license_years_experience = this.calculateAge(date); \n  }    \n  calculateAge(date) {\n    let birthYear = date.getFullYear();\n    let birthMonth = date.getMonth();\n    let birthDay = date.getDate();\n    let todayDate = new Date();\n    let todayYear = todayDate.getFullYear();\n    let todayMonth = todayDate.getMonth();\n    let todayDay = todayDate.getDate();\n    let age = todayYear - birthYear;\n    if (todayMonth < birthMonth - 1) {\n      age--;\n    }\n    if (birthMonth - 1 == todayMonth && todayDay < birthDay) {\n      age--;\n    }\n    return age;\n  }\n  \n  \n}\n    ","/**\n *  Name:  DataPager\n *  Desc:  This custom element provides the ability to page data.\n *  Usage:\n *         <data-pager items.bind=\"origItems\"></data-pager>\n *         When you click to change a page, the pager will publish the \n *         following event:\n *\n *         this.currentPage = index;\n *         let payload = {\n *           pageSize: parseInt(this.pageSize),\n *           currentPage: index\n *         };\n *         this.messageBus.publish('data-pager:page', payload); \n *\n *         The index will come from the button that you click on on the pager.\n *\n *         In the constructor of ViewModel, add the following code: \n *         this.messageBus.subscribe('data-pager:page', payload => {\n *           let startIndex = payload.currentPage * payload.pageSize;\n *           let amount = payload.pageSize;\n *           this.items = this.origItems.filter((item, index) => {\n *             return index >= startIndex && index < startIndex + amount;\n *           });\n *         });\n */\nimport {customElement, bindable, children} from 'aurelia-framework';\nimport {EventAggregator} from 'aurelia-event-aggregator';\n\n@customElement('data-pager')\nexport class DataPager {\n  static inject = [EventAggregator];\n\n  @bindable pagedItems;\n  @bindable items;\n  @bindable pageSize = 5;\n  @bindable pages;\n  @bindable currentPage = 0;\n\n  constructor(messageBus) {\n    this.messageBus = messageBus;\n    // The DataPager always tries to fire after a filter has been\n    // applied.\n    this.messageBus.subscribe('data-filter:filter', payload => {\n      this.items = payload.filter;\n      this.initPage();\n    });\n  }\n\n  bind() {\n  }\n\n  attached() {\n    this.initPage();\n  }\n\n  initPage() {\n    this.pages = Math.ceil(this.items.length / parseInt(this.pageSize));\n    // console.debug('initPage', this.pages);\n    this.currentPage = 0;\n    let payload = {\n      pageSize: parseInt(this.pageSize),\n      currentPage: 0,\n      items: this.items\n    };\n    setTimeout(() => {\n      this.messageBus.publish('data-pager:page', payload);\n    }, 45);\n  }\n\n  setCurrentPage(index) {\n    this.currentPage = index;\n    let payload = {\n      pageSize: parseInt(this.pageSize),\n      currentPage: index,\n      items: this.items\n    };\n    this.messageBus.publish('data-pager:page', payload);    \n  }\n  previousPage() {\n    if (this.currentPage === 0) return;\n    this.currentPage--;\n    this.setCurrentPage(this.currentPage);\n  }\n  nextPage() {\n    if (this.currentPage === this.pages - 1) return;\n    this.currentPage++;\n    this.setCurrentPage(this.currentPage);\n  }\n}","import {customElement, bindable, children} from 'aurelia-framework';\nimport {DialogService} from 'aurelia-dialog';\nimport {SessionService} from '../../../services/session-service';\nimport {LookupDialog} from '../../../dialogs/lookup-dialog';\n\n@customElement('contact-info')\nexport class ContactInfo {\n  static inject = [DialogService, SessionService];\n\n  @bindable currentItem;\n  @bindable lookups;\n  @bindable isReadonly = false;\n\n  constructor(dialogSvc, sessionSvc) {\n    this.dialogSvc = dialogSvc;\n    this.sessionSvc = sessionSvc;\n  }\n  getLookup(name) {\n    let lookup = this.lookups.find(l=> l.name===name);\n    return lookup;\n  }\n  getLookupItems(name) {\n    if (!this.lookups) return [];\n    let lookup = this.lookups.find(l => l.name === name);\n    if (lookup && lookup.fields) return lookup.fields;\n    return [];\n  }\n  async selectChange(e, key, title) {\n    if (e.key === 'F3' && this.sessionSvc.user.roles.includes('admin')) {\n      let model = {\n        data: {\n          database: 'quote-one', \n          collection: 'lookups', \n          header: title, \n          lookupName: key, \n          currentLookup: this.getLookup(key)\n        }\n      };\n      const options = {viewModel: LookupDialog, model}\n      const closeResult = await this.dialogSvc.open(options).then(result => result.closeResult);\n    } else {\n      return true;\n    }\n  }\n  \n}\n    ","import {customElement, bindable, children} from 'aurelia-framework';\nimport {DialogService} from 'aurelia-dialog';\nimport {SessionService} from '../../../services/session-service';\nimport {AddressDialog} from '../../../dialogs/address-dialog';\nimport {LookupDialog} from '../../../dialogs/lookup-dialog';\n\n@customElement('address-info')\nexport class AddressInfo {\n  static inject = [DialogService, SessionService];\n\n  @bindable currentItem;\n  @bindable lookups;\n  @bindable saveCallback;\n  @bindable isReadonly = false;\n\n  constructor(dialogSvc, sessionSvc) {\n    this.dialogSvc = dialogSvc;\n    this.sessionSvc = sessionSvc;\n  }\n  getLookup(name) {\n    let lookup = this.lookups.find(l=> l.name===name);\n    return lookup;\n  }\n  getLookupItems(name) {\n    if (!this.lookups) return [];\n    let lookup = this.lookups.find(l => l.name === name);\n    if (lookup && lookup.fields) return lookup.fields;\n    return [];\n  }\n  async launchAddressDlg() {\n    let model = {\n      header: \"Address\",\n      close: \"Close\", \n      data: this.currentItem.address\n    };\n    const options = {viewModel: AddressDialog, model}\n    const closeResult = await this.dialogSvc.open(options).then(result => result.closeResult);\n    if (closeResult.wasCancelled) return;\n    setTimeout(() => {\n      if (this.saveCallback) {\n        this.saveCallback();\n      }\n    }, 250); \n  }\n  async selectChange(e, key, title) {\n    if (e.key === 'F3' && this.sessionSvc.user.roles.includes('admin')) {\n      let model = {\n        data: {\n          database: 'quote-one', \n          collection: 'lookups', \n          header: title, \n          lookupName: key, \n          currentLookup: this.getLookup(key)\n        }\n      };\n      const options = {viewModel: LookupDialog, model}\n      const closeResult = await this.dialogSvc.open(options).then(result => result.closeResult);\n    } else {\n      return true;\n    }\n  }\n  \n}\n    ","/*\nhttp://www.sobell.net/aurelia-dirty-checking-a-function-part-2/\n*/\nimport {sourceContext} from 'aurelia-binding';\n \nexport class DirtyBindingBehavior {\n  bind(binding, source, event, period=140) {\n    if (!binding.updateTarget) {\n      throw new Error('Only property bindings and string interpolation bindings can be dirty checked.  Trigger, delegate and call bindings cannot be dirty checked.');\n    }\n    binding.interceptedupdateTarget = binding.updateTarget;\n    binding.updateTarget = (a) => { \n      if (this.isDirtyCheck(binding.value, a))\n      {\n        let propname = binding.sourceExpression.expression.name;\n        let callevent = event || binding.source.controller.viewModel[`${propname}Changed`];\n        if (typeof event == 'function')\n          callevent(a, binding.value, propname);\n        binding.interceptedupdateTarget(a);\n      } \n    };\n    binding.dirtyTimer = setInterval(t => binding.call(sourceContext), period);\n  }\n \n  unbind(binding, source) {\n    clearInterval(binding.dirtyTimer);\n    binding.updateTarget = binding.interceptedupdateTarget;\n    binding.interceptedupdateTarget = null;\n  }\n \n  isDirtyCheck(previous,current) {\n    // Date types always change objects, so treat them specially\n    if (typeof current.getMonth === 'function' && typeof previous.getMonth === 'function')\n      return (previous.getTime() != current.getTime())\n    // Basic types accept a simple comparator\n    if (previous != current)\n      return true;\n    // but objects need to be deep-compared\n    return JSON.stringify(previous) != JSON.stringify(current);\n  }\n}","import {customAttribute} from 'aurelia-templating';\nimport {DOM} from 'aurelia-pal';\n\n@customAttribute('set-focus')\nexport class SetFocus {\n  static inject = [DOM.Element];\n\n  constructor(element) {\n    this.element = element;\n  }\n\n  attached() {\n    // console.log('set-focus', this.element);\n    this.element.focus();\n  }\n  \n}","import {customAttribute, bindable} from 'aurelia-framework';\nimport {DOM} from 'aurelia-pal';\n\n/**\n *  Name: input-mask\n *  Desc: This is an input mask custom attribute.\n *  Usage: <input class=\"form-control\" value.bind=\"currentItem.phone\" input-mask=\"pattern: (###) ###-####;\" placeholder=\"(555) 555-1234\">  \n *\n */\n@customAttribute('input-mask')\nexport class InputMask {\n  static inject = [DOM.Element];\n\n  @bindable pattern = ''; // '####-##-##' or '(###) ###-####' or '##:##'\n\n  constructor(element) {\n    this.element = element;\n    if (element instanceof HTMLInputElement) {\n      this.element = element;\n    } else {\n      throw new Error('The input-mask attribute can only be applied on Input elements.');\n    }\n  }\n\n  attached() {\n    this.element.addEventListener(\"keydown\", this.keyDownHandler.bind(this));\n  }\n  detached() {\n    this.element.removeEventListener(\"keydown\", this.keyDownHandler.bind(this));    \n  }\n\n  getOptions(e) {\n    if (!e.key) return null;\n    let value = e.target.value;\n    let isInt = Number.isInteger(Number.parseInt(e.key));\n    let key = e.key.toLowerCase();\n    let valueLen = value.length;\n    let patternLen = this.pattern.length;\n    let char = this.pattern[valueLen];\n    let options = {\n      e,\n      value,\n      isInt,\n      key,\n      valueLen,\n      patternLen,\n      char\n    };\n    return options;\n  }\n\n  keyDownHandler(e) {\n    let options = this.getOptions(e);\n    let result = true;\n    if (options) {\n      // console.log(e.key, valueLen, patternLen, isInt, this.pattern, char);\n      if (this.isValidNonInputKey(options.key)) {\n        // we are okay here...    \n      } else if (options.valueLen === options.patternLen) {\n        console.log('lengths are equal', e);\n        if (e.target.selectionEnd - e.target.selectionStart > 0) {\n          e.target.value = '';\n          // The following is a starting attempt to handle sub-selections. The processKey function will also need to be updated.\n          // let {selectionStart, selectionEnd} = e.target;\n          // let len = selectionEnd - selectionStart;\n          // let substr = e.target.value.substring(selectionStart, selectionStart + len);\n          // e.target.value = e.target.value.replace(substr, '');\n          options = this.getOptions(e);\n          console.log('clearing out...', e.target.value);\n          result = this.processKey(options);\n          // result = true;\n        } else {\n          e.preventDefault();\n          result = false;\n        }\n      } else if (options.char === '#' && options.isInt) {\n        // we are okay here...    \n      } else if (this.processKey(options)) {\n        // we are okay here...\n      } else {\n        console.log('bad input');\n        e.preventDefault();\n        result = false;    \n      }\n    }\n    return result;\n  }\n\n  processKey(options) {\n    if (options.key === options.char) {\n      return true;\n    } else if (options.char !== '#' && options.isInt) {\n      let nextChar = this.pattern[options.valueLen + 1];\n      if (nextChar === ' ') {\n        options.e.target.value = options.e.target.value + options.char + ' ';\n      } else {\n        options.e.target.value = options.e.target.value + options.char;\n      }\n      return true;\n    }\n    console.log('cannot process key', options.key);\n    return false;\n  }\n\n  isValidNonInputKey(key) {\n    const keys = [\n      \"backspace\",\n      \"arrowleft\",\n      \"arrowright\",\n      \"arrowup\",\n      \"arrowdown\",\n      \"home\",\n      \"end\",\n      \"tab\"\n    ];\n    return keys.includes(key);\n  }\n  \n}","export function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .developmentLogging()\n    .feature('resources')\n    .plugin('aurelia-dialog', config => {\n      config.useDefaults();\n      config.settings.lock = true;\n      config.settings.centerHorizontalOnly = false;\n      config.settings.startingZIndex = 5;\n      config.settings.keyboard = true;\n    });\n\n  aurelia.start().then(a => a.setRoot());\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import {DialogController} from 'aurelia-dialog';\nimport {EdmundsService} from '../services/edmunds-service';\n\nexport class VinDialog {\n  static inject = [DialogController];\n  \n  model = {};\n\n  constructor(controller) {\n    this.controller = controller;\n  }\n  activate(model){\n    this.model = model;\n    this.owner = model.owner;\n    this.edmundsSvc = new EdmundsService();\n  }  \n  attached() {    \n  }  \n  lookup(e, record) {    \n    this.performLookup(record);  \n  }  \n  performLookup(record) {    \n    let query = { \n      vin: record.vin \n    };    \n    return this.owner.dataSvc.findOne(this.owner.database, 'vins', query).then(result => {      \n      if (result) {        \n        this.setVinData(record.vin, result);        \n        this.owner.notifier.growl({type: 'info', message: `VIN #${result.vin} loaded from database.`});        \n        this.controller.ok(true);      \n      } else {        \n        this.edmundsSvc.performLookup(record.vin).then(data => {          \n          if (data.status) {            \n            this.owner.notifier.growl({type: 'error', message: data.message});\n          } else {\n            data.vin = record.vin;\n            this.setVinData(record.vin, data);\n            this.owner.notifier.growl({type: 'info', message: `VIN #${data.vin} loaded from Edmunds Service.`});\n            this.owner.dataSvc.save(this.owner.database, 'vins', data).then(s => {\n              this.owner.notifier.growl({type: 'success', message: `VIN #${data.vin} added to database.`});\n            });\n            this.controller.ok(true);\n          }\n        });\n      }\n      return result;\n    });\n  }  \n  setVinData(vin, data) {    \n    this.model.data['vin'] = vin;    \n    this.model.data['year'] = data.years[0].year;    \n    this.model.data['make'] = data.make.name;    \n    this.model.data['model'] = data.model.name;    \n    this.model.data['description'] = data.years[0].styles[0].trim;  \n  }    \n}","import {DialogController} from 'aurelia-dialog';\nimport {BindingSignaler} from 'aurelia-templating-resources';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {DataService} from '../services/data-service';\nimport {Notifier} from '../resources/elements/notifier/notifier';\n\nexport class VehicleLookupDialog {\n  static inject = [DialogController, BindingSignaler, EventAggregator, DataService, Notifier];\n  \n  database = 'quote-one';\n  model = {};\n  items = [];  \n  origItems = [];\n  currentItem;\n\n  constructor(controller, signaler, messageBus, dataSvc, notifier) {\n    this.controller = controller;\n    this.signaler = signaler;    \n    this.dataSvc = dataSvc;\n    this.notifier = notifier;\n    this.messageBus = messageBus;\n\n    this.messageBus.subscribe('data-pager:page', payload => {\n      // console.log('data-pager:page', payload);\n      let startIndex = payload.currentPage * payload.pageSize;\n      let amount = payload.pageSize;\n      this.items = this.origItems.filter((item, index) => {\n        return index >= startIndex && index < startIndex + amount;\n      });\n    });    \n  }\n  async activate(model){\n    this.model = model;\n    await this.getResources();\n  }\n  async getResources() {\n    const values = await Promise.all([this.dataSvc.findById(this.database, \"customers\", this.model.recordId)]);\n    this.items = values[0].household_vehicles;\n  }\n  selectRecord(record) {\n    this.items.forEach(r => r.isSelected = false);\n    record.isSelected = true;\n    this.currentItem = record;\n  }\n}","import {DialogController} from 'aurelia-dialog';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {DialogService} from 'aurelia-dialog';\nimport {DataService} from '../services/data-service';\nimport {SessionService} from '../services/session-service';\nimport {Notifier} from '../resources/elements/notifier/notifier';\nimport {LookupDialog} from './lookup-dialog';\n\nexport class VehicleDialog {\n  static inject = [DialogController, EventAggregator, DialogService, DataService, SessionService, Notifier];\n  \n  model = {};\n  lookups;\n  isReadonly = false;\n\n  constructor(controller, messageBus, dialogSvc, dataSvc, sessionSvc, notifier) {\n    this.controller = controller;\n    this.messageBus = messageBus;\n    this.dialogSvc = dialogSvc;\n    this.dataSvc = dataSvc;\n    this.sessionSvc = sessionSvc;\n    this.notifier = notifier;\n  }\n  activate(model){\n    this.model = model;\n    this.currentItem = model.data;\n    if (model.isReadonly) {\n      this.isReadonly = model.isReadonly;\n    }\n    this.lookups = model.lookups;\n  }\n  getLookup(name) {\n    let lookup = this.lookups.find(l=> l.name===name);\n    return lookup;\n  }  \n  getLookupItems(name) {\n    if (!this.lookups) return [];\n    let lookup = this.lookups.find(l => l.name === name);\n    if (lookup && lookup.fields) return lookup.fields;\n    return [];\n  }\n  selectChange(e, key, title) {\n    if (e.key === 'F3' && this.sessionSvc.user.roles.includes('admin')) {\n      let model = {\n        data: {\n          database: 'quote-one', \n          collection: 'lookups', \n          header: title, \n          lookupName: key, \n          currentLookup: this.getLookup(key)\n        }\n      };\n      console.debug('lookups', this.dialogSvc);\n      const options = {viewModel: LookupDialog, model}\n      this.dialogSvc.open(options).whenClosed(response => {\n        if (!response.wasCancelled) {\n          // console.log('ok clicked');\n        } else {\n          // console.log('cancel clicked');\n        }\n      });            \n    } else {\n      return true;\n    }\n  }  \n}","import {DialogService} from 'aurelia-dialog';\nimport {DialogController} from 'aurelia-dialog';\nimport {SessionService} from '../services/session-service';\nimport {Notifier} from '../resources/elements/notifier/notifier';\n\nexport class UserSettingsDialog {\n  static inject = [DialogService, DialogController, SessionService, Notifier];\n  \n  model = {};\n\n  constructor(dialogSvc, controller, sessionSvc, notifier) {\n    this.dialogSvc = dialogSvc;\n    this.controller = controller;\n    this.sessionSvc = sessionSvc;\n    this.notifier = notifier;\n  }\n  \n  activate(model){\n    this.model = model;\n    console.debug('users-settings-dialog:sessionSvc', this.sessionSvc);\n  }\n\n  logout() {\n    this.controller.ok(true);\n    this.sessionSvc.logout();\n  }\n  \n}\n","import {BindingSignaler} from 'aurelia-templating-resources';\nimport {DialogController} from 'aurelia-dialog';\n\nexport class SubmitDialog {\n  static inject = [BindingSignaler, DialogController];\n  \n  model = {};\n  carriers = [];\n  autoRun = false;\n  canSubmit = false;\n\n  constructor(signaler, controller) {\n    this.signaler = signaler;\n    this.controller = controller;\n    this.init();\n  }\n  \n  init() {\n    this.carriers = [\n      {name: \"Diaryland\", isSelected: false},\n      {name: \"Discovery\", isSelected: false},\n      {name: \"National General\", isSelected: false},\n      {name: \"Progressive\", isSelected: false},\n      {name: \"Southern\", isSelected: false}\n    ];\n  }\n\n  activate(model){\n    this.model = model;\n  }\n\n  toggleSelect($index, item) {\n    item.isSelected = !item.isSelected;\n    const selectedItems = this.carriers.filter(c => c.isSelected);\n    console.log('selectedItems', selectedItems);\n    if (selectedItems && selectedItems.length > 0) {\n      this.canSubmit = true;\n    } else {\n      this.canSubmit = false;\n    }\n    this.signaler.signal('binding-signal');\n    return true;\n  }\n\n  submit() {\n    // This will call an Azure Function that will do the following:\n    // 1. Update quote record setting corresponding status\n    // 2. Update quote record setting corresponding carrier to run\n    // 3. Save quote record to database\n    // 4. Trigger Firebase that an update has been made on this recordId\n    this.controller.ok(true);\n  }\n\n}\n","import {DialogController} from 'aurelia-dialog';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {DataService} from '../services/data-service';\nimport {Notifier} from '../resources/elements/notifier/notifier';\n\nexport class NoteDialog {\n  static inject = [DialogController, EventAggregator, DataService, Notifier];\n  \n  model = {};\n  lookups;\n\n  constructor(controller, messageBus, dataSvc, notifier) {\n    this.controller = controller;\n    this.dataSvc = dataSvc;\n    this.notifier = notifier;\n    this.messageBus = messageBus;\n  }\n  activate(model){\n    this.model = model;\n    this.currentItem = model.data;\n    this.lookups = model.lookups;\n  }\n  getLookupItems(name) {\n    if (!this.lookups) return [];\n    let lookup = this.lookups.find(l => l.name === name);\n    if (lookup && lookup.fields) return lookup.fields;\n    return [];\n  }  \n}","import {DialogController} from 'aurelia-dialog';\nimport {BindingSignaler} from 'aurelia-templating-resources';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {DataService} from '../services/data-service';\nimport {Notifier} from '../resources/elements/notifier/notifier';\n\nexport class MemberLookupDialog {\n  static inject = [DialogController, BindingSignaler, EventAggregator, DataService, Notifier];\n  \n  database = 'quote-one';\n  model = {};\n  items = [];  \n  origItems = [];\n  currentItem;\n\n  constructor(controller, signaler, messageBus, dataSvc, notifier) {\n    this.controller = controller;\n    this.signaler = signaler;    \n    this.dataSvc = dataSvc;\n    this.notifier = notifier;\n    this.messageBus = messageBus;\n\n    this.messageBus.subscribe('data-pager:page', payload => {\n      // console.log('data-pager:page', payload);\n      let startIndex = payload.currentPage * payload.pageSize;\n      let amount = payload.pageSize;\n      this.items = this.origItems.filter((item, index) => {\n        return index >= startIndex && index < startIndex + amount;\n      });\n    });    \n  }\n  async activate(model){\n    this.model = model;\n    await this.getResources();\n  }\n  async getResources() {\n    const values = await Promise.all([this.dataSvc.findById(this.database, \"customers\", this.model.recordId)]);\n    this.items = values[0].household_members;\n  }\n  selectRecord(record) {\n    this.items.forEach(r => r.isSelected = false);\n    record.isSelected = true;\n    this.currentItem = record;\n  }\n}","import {DialogController} from 'aurelia-dialog';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {DialogService} from 'aurelia-dialog';\nimport {DataService} from '../services/data-service';\nimport {SessionService} from '../services/session-service';\nimport {Notifier} from '../resources/elements/notifier/notifier';\nimport {LookupDialog} from './lookup-dialog';\n\nexport class MemberDialog {\n  static inject = [DialogController, EventAggregator, DialogService, DataService, SessionService, Notifier];\n  \n  model = {};\n  lookups;\n  isReadonly = false;\n\n  constructor(controller, messageBus, dialogSvc, dataSvc, sessionSvc, notifier) {\n    this.controller = controller;\n    this.messageBus = messageBus;\n    this.dialogSvc = dialogSvc;\n    this.dataSvc = dataSvc;\n    this.sessionSvc = sessionSvc;\n    this.notifier = notifier;\n  }\n  activate(model){\n    this.model = model;\n    this.currentItem = model.data;\n    if (model.isReadonly) {\n      this.isReadonly = model.isReadonly;\n    }\n    this.lookups = model.lookups;\n  }\n  getLookup(name) {\n    let lookup = this.lookups.find(l=> l.name===name);\n    return lookup;\n  }  \n  getLookupItems(name) {\n    if (!this.lookups) return [];\n    let lookup = this.lookups.find(l => l.name === name);\n    if (lookup && lookup.fields) return lookup.fields;\n    return [];\n  }\n  selectChange(e, key, title) {\n    if (e.key === 'F3' && this.sessionSvc.user.roles.includes('admin')) {\n      let model = {\n        data: {\n          database: 'quote-one', \n          collection: 'lookups', \n          header: title, \n          lookupName: key, \n          currentLookup: this.getLookup(key)\n        }\n      };\n      console.debug('lookups', this.dialogSvc);\n      const options = {viewModel: LookupDialog, model}\n      this.dialogSvc.open(options).whenClosed(response => {\n        if (!response.wasCancelled) {\n          \n        }\n      });\n    } else {\n      return true;\n    }\n  }\n  disabled(value, ...args) {\n    return !args.includes(value);\n  }  \n}","import {DialogController} from 'aurelia-dialog';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {DataService} from '../services/data-service';\nimport {Notifier} from '../resources/elements/notifier/notifier';\n\nexport class LookupDialog {\n  static inject = [DialogController, EventAggregator, DataService, Notifier];\n  \n  database;\n  collection;\n  model = {};\n  currentLookup;\n  items = [];  \n  origItems = [];\n\n  constructor(controller, messageBus, dataService, notifier) {\n    this.controller = controller;\n    this.dataService = dataService;\n    this.notifier = notifier;\n    this.messageBus = messageBus;\n\n    this.messageBus.subscribe('data-pager:page', payload => {\n      // console.log('data-pager:page', payload);\n      let startIndex = payload.currentPage * payload.pageSize;\n      let amount = payload.pageSize;\n      this.items = this.origItems.filter((item, index) => {\n        return index >= startIndex && index < startIndex + amount;\n      });\n    });    \n  }\n  activate(model){\n    this.model = model;\n    this.database = model.data.database;\n    this.collection = model.data.collection;\n    this.items = model.data.currentLookup.fields;\n    // this.origItems = model.data.currentLookup.fields;\n    // console.log('origItems', this.origItems);\n  }  \n  addRecord() {\n    this.items.push({ name: 'Test', value: 'test' });\n  }\n  removeRecord(index, item) {\n    this.items.splice(index, 1);\n  }\n  save() {\n    console.log('save', this.model.data.currentLookup);\n    console.log('database', this.database, 'collection', this.collection);    \n    // this.dataService.save(this.database, this.collection, this.origItems).then(response => {\n    this.dataService.save(this.database, this.collection, this.model.data.currentLookup).then(response => {\n      this.notifier.growl({message:'Save complete!'});\n      this.controller.ok(true);\n    });  \n  }\n}","import {DialogController} from 'aurelia-dialog';\nimport {BindingSignaler} from 'aurelia-templating-resources';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {DataService} from '../services/data-service';\nimport {Notifier} from '../resources/elements/notifier/notifier';\n\nexport class CustomerDialog {\n  static inject = [DialogController, BindingSignaler, EventAggregator, DataService, Notifier];\n  \n  database = 'quote-one';\n  model = {};\n  items = [];  \n  origItems = [];\n  currentItem;\n\n  constructor(controller, signaler, messageBus, dataSvc, notifier) {\n    this.controller = controller;\n    this.signaler = signaler;    \n    this.dataSvc = dataSvc;\n    this.notifier = notifier;\n    this.messageBus = messageBus;\n\n    this.messageBus.subscribe('data-pager:page', payload => {\n      // console.log('data-pager:page', payload);\n      let startIndex = payload.currentPage * payload.pageSize;\n      let amount = payload.pageSize;\n      this.items = this.origItems.filter((item, index) => {\n        return index >= startIndex && index < startIndex + amount;\n      });\n    });    \n  }\n  async activate(model){\n    this.model = model;\n    await this.getResources();\n  }\n  async getResources() {\n    const values = await Promise.all([this.dataSvc.findAll(this.database, \"customers\", null, {name: 1})]);\n    this.items = values[0];\n  }\n  selectRecord(record) {\n    this.items.forEach(r => r.isSelected = false);\n    record.isSelected = true;\n    this.currentItem = record;\n  }\n}","import {DialogController} from 'aurelia-dialog';\n\nexport class ConfirmDelete {\n  static inject = [DialogController];\n  \n  model = {};\n\n  constructor(controller) {\n    this.controller = controller;\n  }\n  \n  activate(model){\n    this.model = model;\n  }\n}\n","import {DialogController} from 'aurelia-dialog';\n\nexport class ConfirmDeleteDialog {\n  static inject = [DialogController];\n  \n  model = {};\n\n  constructor(controller) {\n    this.controller = controller;\n  }\n  \n  activate(model){\n    this.model = model;\n  }\n}\n","import {DialogController} from 'aurelia-dialog';\nimport {GoogleAddressService} from '../services/google-address-service';\n\nexport class AddressDialog {\n  static inject = [DialogController];\n  \n  model = {};\n\n  constructor(controller) {\n    this.controller = controller;\n  }\n  activate(model){\n    this.model = model;\n    this.googleAddressSvc = new GoogleAddressService(); \n  }  \n  attached() {\n    // console.log('address-dialog', this.owner.data);\n    this.googleAddressSvc.init('#autocomplete', this.model.data);\n  } \n  detached() { \n    this.googleAddressSvc.unload(); \n  } \n  save(e, record) { \n    this.controller.ok(true); \n  } \n}","import {Redirect} from 'aurelia-router';\nimport {Notifier} from './resources/elements/notifier/notifier';\nimport {AuthorizeStep} from './security/authorize-step';\n\nexport class App {\n  static inject = [Notifier];\n  \n  constructor(notifier) {\n    this.notifier = notifier;\n  }\n\n  configureRouter(config, router) {\n    const handleUnknownRoutes = (instruction) => {\n      return { route: 'access-denied', moduleId: 'views/access-denied/access-denied', settings: { roles: [] } };\n    };\n    config.title = 'QuoteOne';\n    config.options.pushState = true;\n    config.options.root = '/quoteone-dev/';    \n    // config.options.root = '/';    \n    config.addPipelineStep('authorize', AuthorizeStep);\n    \n    config.map([\n      { route: ['', 'quotes'], name: 'quotes',  moduleId: 'views/quotes/quotes',  nav: true, title: 'Quotes', settings: { roles: ['authorized'] } },\n      { route: 'quote/:recordid',      name: 'quote', moduleId: 'views/quotes/quote', nav: false, title: 'Quote', settings: { roles: ['authorized'] } },\n      { route: 'quote/:recordid/images',      name: 'quote-images', moduleId: 'views/quote-images/quote-images', nav: false, title: 'Quote Images', settings: { roles: ['authorized'] } },\n      { route: 'quote-dashboard', name: 'quote-dashboard',  moduleId: 'views/quote-dashboard/quote-dashboard',  nav: true, title: 'Automation Dashboard', settings: { roles: ['authorized'] } },\n      { route: 'callback', name: 'callback',  moduleId: 'views/callback/callback', nav: false, settings: { roles: [] } },\n      { route: 'tickler', name: 'tickler',  moduleId: 'views/tickler/tickler',  nav: true, title: 'Mobile Tickler', settings: { roles: ['authorized'] } },\n      { route: 'customers', name: 'customers',  moduleId: 'views/customers/customers',  nav: true, title: 'Customers', settings: { roles: ['authorized'] } },\n      { route: 'customers/:recordid',      name: 'customer', moduleId: 'views/customers/customer', nav: false, title: 'Customer', settings: { roles: ['authorized'] } },\n      { route: 'test-bed', name: 'test-bed',  moduleId: 'views/test-bed/test-bed',  nav: true, title: 'Test View', settings: { roles: ['authorized'] } },\n    ]);\n    \n    config.mapUnknownRoutes(handleUnknownRoutes);\n    this.router = router;\n  }\n}\n"],"sourceRoot":".."}